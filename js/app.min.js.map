{"version":3,"sources":["app.js"],"names":["email_test","input","test","value","sliders","document","querySelectorAll","index","length","slider","classList","contains","slider_items","children","add","slider_content","innerHTML","slider_wrapper","createElement","appendChild","sliderScroll","sliders_bild_callback","params","sliderHero","Swiper","slidesPerView","spaceBetween","speed","autoHeight","pagination","el","clickable","navigation","nextEl","prevEl","on","lazyImageReady","ibg","sliderProducts","watchSlidesVisibility","loop","breakpoints","sliderStocks","heroProductPageSlider","sliderSimilarGoods","sliderBuyMore","sliderCompare","watchOverflow","scrollbar","draggable","slidesPerGroup","touchRatio","simulateTouch","sliderScrollItems","sliderScrollItem","sliderScrollBar","querySelector","observer","observeParents","direction","freeMode","snapOnRelease","mousewheel","releaseOnEdges","updateSize","ua","window","navigator","userAgent","msie","indexOf","isMobile","Android","match","BlackBerry","iOS","Opera","Windows","any","isIE","testWebP","callback","webP","Image","onload","onerror","height","src","i","getAttribute","style","backgroundImage","support","addEventListener","setTimeout","unlock","itemsBlock","specificationsItems","itemsLenght","forEach","specificationsItem","specificationsItemElements","hiddenSpollersBlock","append","link","element","insertAdjacentHTML","setSpollerClass","spollersLinks","spollersLink","e","location","hash","hsh","replace","popup_open","_goto","iconMenu","delay","menuBody","body_lock","toggle","menu_close","remove","body_lock_remove","body_lock_add","body","lock_padding","paddingRight","innerWidth","offsetWidth","title","txt_words","split","new_title","txt_word","len","it","substr","tabs","tab","tabs_items","tabs_blocks","tabs_item","preventDefault","spollers","spollersGo","spollerCLick","spoller","target","closest","curent_spollers","_slideUp","nextElementSibling","_slideToggle","spollersInit","spollerMax","cssText","removeEventListener","spollersShowActive","gallery","gallery_init","lightGallery","counter","selector","download","search_in_list","li","parentNode","filter","toUpperCase","item","txtValue","textContent","innerText","display","digi","str","toString","digi_animate","el_to","parseInt","digi_animate_value","start","end","duration","obj","range","stepTime","Math","abs","floor","max","timer","endTime","Date","getTime","run","now","remaining","round","clearInterval","setInterval","popup_link","popups","popup_close","video","curent_popup","history","pushState","bodyUnlock","popup","href","popup_close_icon","code","transitionProperty","transitionDuration","offsetHeight","overflow","paddingTop","paddingBottom","marginTop","marginBottom","removeProperty","_slideDown","getComputedStyle","_wrap","wrapper","insertBefore","_removeClasses","class_name","_is_hidden","offsetParent","moreBlocks","moreBlock","items","isScrollStart","itemsMore","itemsContent","itemsView","setSize","type","resultHeight","itemsContentHeight","itemsContentStartHeight","isScrollEnd","getPropertyValue","ratings","initRatings","ratingActive","ratingValue","rating","initRating","initRatingVars","setRatingActiveWidth","ratingItems","ratingItem","dataset","ajax","setRatingValue","setRating","ratingActiveWidth","width","async","response","fetch","method","ok","newRating","json","alert","allRatings","activeRatingValue","animate","timing","draw","performance","requestAnimationFrame","time","timeFraction","progress","makeEaseOut","makeEaseInOut","quad","pow","circ","sin","acos","send","event","php","console","log","returnValue","req","XMLHttpRequest","open","status","JSON","parse","this","result","FormData","ratingValueBox","Element","prototype","css","node","matches","parentElement","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","help","getMoreQuestions","targetElem","text","previousElementSibling","productBar","favourites","favouriteCurrent","colorSchemes","colorScheme","tabLinks","tabsContent","sidebar","tabLink","tabId","tabContent","userbarItems","hideAllUserbarPopups","userbarPopup","itemsWrapper","emptyMessage","getUserBarInfo","activePopup","userbarItem","itemId","searchInput","headerMenu","searchBlock","searchIcon","clearInputIcon","searchHideIcon","searchList","hoverTexts","hoverTextActive","currentHeight","sizeItems","sizeItem","mobSlider","mobSlides","sections","mobSlidesLenght","mobSlide","data","activeSections","buttonAddCart","buttonGoCart","bankInput","bankIconClose","bankSearchList","products","hoverText","productImage","currentHeieght","productSizes","productSize","orderPage","orderBlock","inputAddSelfCompany","inputIsShowed","orderItem","addComapnyBtn","forms","form_submit","form","form_validate","formAction","trim","formMethod","message","formData","form_clean","form_error","error","form_req","form_validate_input","input_g_value","em","form_add_error","form_remove_error","checked","a","parentRadio","allRadioButtons","Array","from","some","removeRadioError","input_error","removeChild","input_error_text","inputs","checkboxes","selects","select","select_default_value","select_item","viewPass","setAttribute","getElementsByTagName","selects_init","select_init","selects_close","select_body_options","select_parent","select_modifikator","select_selected_option","select_items","select_options","select_selected_text","select_type","select_type_content","select_get_options","select_actions","original","selectTitle","select_input","selectMultiItems","selectedOptions","originalOptions","selectedOptionsText","selectedOption","removeAttribute","selectOptionText","push","selectItemActions","select_option","select_option_value","select_option_text","select_search","hasAttribute","select_options_content","select_search_text","selects_update_all","inputs_init","input_placeholder_add","input_focus_add","Inputmask","clearIncomplete","clearMaskOnLostFocus","onincomplete","input_clear_mask","mask","placeholder","input_focus_remove","calendarItem","datepicker","customDays","customMonths","overlayButton","overlayPlaceholder","startDay","formatter","date","instance","toLocaleDateString","onSelect","dataFrom","dataTo","setMin","setMax","inputmask","quantityButtons","quantityButton","priceSlider","textFrom","textTo","setPriceValues","priceStartValue","priceEndValue","priceStart","priceEnd","noUiSlider","set","create","connect","tooltips","wNumb","decimals","prefix","min","currentScroll","scr_body","scr_blocks","scr_items","scr_fix_block","scr_min_height","scrolling","scrolling_full","scrollDirection","scroll_scroll","src_value","pageYOffset","header","block","block_offset","offset","top","block_height","innerHeight","scr_item","scr_item_offset","scr_item_height","scr_item_point","scroll_load_item","scroll_lazy","fix_block","custom_scroll_line","window_height","content_height","scr_procent","custom_scroll_line_height","transform","lazy_src","lazy_srcset","getElementById","map","scrParallax","scrProcent","blockHeight","prlxItems","prlxItem","prlxItemValue","prlx","disableScroll","full_scroll","swiperScrolls","swiperScroll","getPrevBlockPos","current_block_prev","viewport_height","current_block_prev_height","block_pos","current_block","current_block_pos","current_block_height","current_block_next","keyCode","deltaX","deltaY","full_scroll_to_sector","enableScroll","pos","scr_pause","appVersion","full_scroll_pagestart","full_scroll_pageend","blocks","block_name","target_block_class","old_current_link","block_item","current_links","goto_links","goto_link","target_block","options","speedAsDuration","easing","SmoothScroll","animateScroll","rect","getBoundingClientRect","scrollLeft","pageXOffset","documentElement","scrollTop","left","passive","onwheel","onmousewheel","ontouchmove","onkeydown","preventDefaultForScrollKeys","scr_value","window_width","header_height","block_width","gotoRelative","custom_scroll","custom_scroll_content_height","custom_cursor_height","new_pos","scroll_animate","DynamicAdapt","init","_this","daClassname","nodes","dataArray","da","parent","destination","breakpoint","place","indexInParent","arraySort","mediaQueries","call","self","media","mediaSplit","String","matchMedia","mediaBreakpoint","addListener","mediaHandler","moveTo","moveBack","insertAdjacentElement","undefined","array","slice","arr","sort","b"],"mappings":"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","file":"app.min.js","sourcesContent":["function email_test(input) {\r\n\treturn !/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,8})+$/.test(input.value);\r\n}\r\n//BildSlider\r\nlet sliders = document.querySelectorAll('._swiper');\r\nif (sliders) {\r\n\tfor (let index = 0; index < sliders.length; index++) {\r\n\t\tlet slider = sliders[index];\r\n\t\tif (!slider.classList.contains('swiper-bild')) {\r\n\t\t\tlet slider_items = slider.children;\r\n\t\t\tif (slider_items) {\r\n\t\t\t\tfor (let index = 0; index < slider_items.length; index++) {\r\n\t\t\t\t\tlet el = slider_items[index];\r\n\t\t\t\t\tel.classList.add('swiper-slide');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet slider_content = slider.innerHTML;\r\n\t\t\tlet slider_wrapper = document.createElement('div');\r\n\t\t\tslider_wrapper.classList.add('swiper-wrapper');\r\n\t\t\tslider_wrapper.innerHTML = slider_content;\r\n\t\t\tslider.innerHTML = '';\r\n\t\t\tslider.appendChild(slider_wrapper);\r\n\t\t\tslider.classList.add('swiper-bild');\r\n\r\n\t\t\tif (slider.classList.contains('_swiper_scroll')) {\r\n\t\t\t\tlet sliderScroll = document.createElement('div');\r\n\t\t\t\tsliderScroll.classList.add('swiper-scrollbar');\r\n\t\t\t\tslider.appendChild(sliderScroll);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (slider.classList.contains('_gallery')) {\r\n\t\t\t//slider.data('lightGallery').destroy(true);\r\n\t\t}\r\n\t}\r\n\tsliders_bild_callback();\r\n}\r\n\r\nfunction sliders_bild_callback(params) {}\r\n\r\nlet sliderHero = new Swiper('.hero__slider', {\r\n\tslidesPerView: 1,\r\n\tspaceBetween: 10,\r\n\tspeed: 800,\r\n\tautoHeight: true,\r\n\t//touchRatio: 0,\r\n\t//simulateTouch: false,\r\n\t//loop: true,\r\n\t//preloadImages: false,\r\n\t//lazy: true,\r\n\t// Dotts\r\n\tpagination: {\r\n\t\tel: '.hero__bullets',\r\n\t\tclickable: true,\r\n\t},\r\n\t// Arrows\r\n\tnavigation: {\r\n\t\tnextEl: '.hero__arrow_right',\r\n\t\tprevEl: '.hero__arrow_left',\r\n\t},\r\n\t/*\r\n\tbreakpoints: {\r\n\t\t320: {\r\n\t\t\tslidesPerView: 1,\r\n\t\t\tspaceBetween: 0,\r\n\t\t\tautoHeight: true,\r\n\t\t},\r\n\t\t768: {\r\n\t\t\tslidesPerView: 2,\r\n\t\t\tspaceBetween: 20,\r\n\t\t},\r\n\t\t992: {\r\n\t\t\tslidesPerView: 3,\r\n\t\t\tspaceBetween: 20,\r\n\t\t},\r\n\t\t1268: {\r\n\t\t\tslidesPerView: 4,\r\n\t\t\tspaceBetween: 30,\r\n\t\t},\r\n\t},\r\n\t*/\r\n\ton: {\r\n\t\tlazyImageReady: function () {\r\n\t\t\tibg();\r\n\t\t},\r\n\t}\r\n\t// And if we need scrollbar\r\n\t//scrollbar: {\r\n\t//\tel: '.swiper-scrollbar',\r\n\t//},\r\n});\r\n\r\nlet sliderProducts = new Swiper('.top-sales__products', {\r\n\tslidesPerView: 4,\r\n\tspaceBetween: 30,\r\n\tspeed: 800,\r\n\twatchSlidesVisibility: true,\r\n\t// autoHeight: true,\r\n\t//touchRatio: 0,\r\n\t//simulateTouch: false,\r\n\tloop: true,\r\n\t//preloadImages: false,\r\n\t//lazy: true,\r\n\t// Dotts\r\n\t// pagination: {\r\n\t// \tel: '.hero__bullets',\r\n\t// \tclickable: true,\r\n\t// },\r\n\t// Arrows\r\n\tnavigation: {\r\n\t\tnextEl: '.top-sales__arrow_right',\r\n\t\tprevEl: '.top-sales__arrow_left',\r\n\t},\r\n\r\n\tbreakpoints: {\r\n\t\t320: {\r\n\t\t\tslidesPerView: 2.5,\r\n\t\t\tspaceBetween: 16\r\n\t\t},\r\n\t\t600: {\r\n\t\t\tslidesPerView: 3,\r\n\t\t\tspaceBetween: 20,\r\n\t\t},\r\n\t\t1268: {\r\n\t\t\tslidesPerView: 4,\r\n\t\t\tspaceBetween: 30,\r\n\t\t},\r\n\t},\r\n\r\n\ton: {\r\n\t\tlazyImageReady: function () {\r\n\t\t\tibg();\r\n\t\t},\r\n\t}\r\n\t// And if we need scrollbar\r\n\t//scrollbar: {\r\n\t//\tel: '.swiper-scrollbar',\r\n\t//},\r\n});\r\n\r\nlet sliderStocks = new Swiper('.stocks__items', {\r\n\tslidesPerView: 4,\r\n\tspaceBetween: 24,\r\n\tspeed: 800,\r\n\twatchSlidesVisibility: true,\r\n\t// autoHeight: true,\r\n\t//touchRatio: 0,\r\n\t//simulateTouch: false,\r\n\tloop: true,\r\n\t//preloadImages: false,\r\n\t//lazy: true,\r\n\t// Dotts\r\n\t// pagination: {\r\n\t// \tel: '.hero__bullets',\r\n\t// \tclickable: true,\r\n\t// },\r\n\t// Arrows\r\n\tnavigation: {\r\n\t\tnextEl: '.stocks__arrow_right',\r\n\t\tprevEl: '.stocks__arrow_left',\r\n\t},\r\n\r\n\tbreakpoints: {\r\n\t\t320: {\r\n\t\t\tslidesPerView: 1.3,\r\n\t\t\tspaceBetween: 8\r\n\t\t},\r\n\t\t600: {\r\n\t\t\tslidesPerView: 2,\r\n\t\t\tspaceBetween: 20,\r\n\t\t},\r\n\t\t991.98: {\r\n\t\t\tslidesPerView: 3,\r\n\t\t\tspaceBetween: 20,\r\n\t\t},\r\n\t\t// 1268: {\r\n\t\t// \tslidesPerView: 4,\r\n\t\t// \tspaceBetween: 30,\r\n\t\t// },\r\n\t\t1388: {\r\n\t\t\tslidesPerView: 4,\r\n\t\t}\r\n\t},\r\n\r\n\ton: {\r\n\t\tlazyImageReady: function () {\r\n\t\t\tibg();\r\n\t\t},\r\n\t}\r\n\t// And if we need scrollbar\r\n\t//scrollbar: {\r\n\t//\tel: '.swiper-scrollbar',\r\n\t//},\r\n});\r\n\r\nlet heroProductPageSlider = new Swiper('.hero-product-page__slider', {\r\n\tslidesPerView: 1,\r\n\tspaceBetween: 10,\r\n\tspeed: 800,\r\n\tautoHeight: true,\r\n\t//touchRatio: 0,\r\n\t//simulateTouch: false,\r\n\t//loop: true,\r\n\t//preloadImages: false,\r\n\t//lazy: true,\r\n\t// Dotts\r\n\tpagination: {\r\n\t\tel: '.hero__bullets',\r\n\t\tclickable: true,\r\n\t},\r\n\t// Arrows\r\n\tnavigation: {\r\n\t\tnextEl: '.hero__arrow_right',\r\n\t\tprevEl: '.hero__arrow_left',\r\n\t},\r\n\t/*\r\n\tbreakpoints: {\r\n\t\t320: {\r\n\t\t\tslidesPerView: 1,\r\n\t\t\tspaceBetween: 0,\r\n\t\t\tautoHeight: true,\r\n\t\t},\r\n\t\t768: {\r\n\t\t\tslidesPerView: 2,\r\n\t\t\tspaceBetween: 20,\r\n\t\t},\r\n\t\t992: {\r\n\t\t\tslidesPerView: 3,\r\n\t\t\tspaceBetween: 20,\r\n\t\t},\r\n\t\t1268: {\r\n\t\t\tslidesPerView: 4,\r\n\t\t\tspaceBetween: 30,\r\n\t\t},\r\n\t},\r\n\t*/\r\n\ton: {\r\n\t\tlazyImageReady: function () {\r\n\t\t\tibg();\r\n\t\t},\r\n\t}\r\n\t// And if we need scrollbar\r\n\t//scrollbar: {\r\n\t//\tel: '.swiper-scrollbar',\r\n\t//},\r\n});\r\n\r\nlet sliderSimilarGoods = new Swiper('.similar-goods__content', {\r\n\tslidesPerView: 4,\r\n\tspaceBetween: 30,\r\n\tspeed: 800,\r\n\twatchSlidesVisibility: true,\r\n\t// autoHeight: true,\r\n\t//touchRatio: 0,\r\n\t//simulateTouch: false,\r\n\tloop: true,\r\n\t//preloadImages: false,\r\n\t//lazy: true,\r\n\t// Dotts\r\n\t// pagination: {\r\n\t// \tel: '.hero__bullets',\r\n\t// \tclickable: true,\r\n\t// },\r\n\t// Arrows\r\n\tnavigation: {\r\n\t\tnextEl: '.top-sales__arrow_right',\r\n\t\tprevEl: '.top-sales__arrow_left',\r\n\t},\r\n\r\n\tbreakpoints: {\r\n\t\t320: {\r\n\t\t\tslidesPerView: 2.5,\r\n\t\t\tspaceBetween: 16\r\n\t\t},\r\n\t\t600: {\r\n\t\t\tslidesPerView: 3,\r\n\t\t\tspaceBetween: 20,\r\n\t\t},\r\n\t\t1268: {\r\n\t\t\tslidesPerView: 4,\r\n\t\t\tspaceBetween: 30,\r\n\t\t},\r\n\t},\r\n\r\n\ton: {\r\n\t\tlazyImageReady: function () {\r\n\t\t\tibg();\r\n\t\t},\r\n\t}\r\n\t// And if we need scrollbar\r\n\t//scrollbar: {\r\n\t//\tel: '.swiper-scrollbar',\r\n\t//},\r\n});\r\n\r\nlet sliderBuyMore = new Swiper('.buy-more__content', {\r\n\tslidesPerView: 4,\r\n\tspaceBetween: 30,\r\n\tspeed: 800,\r\n\twatchSlidesVisibility: true,\r\n\t// autoHeight: true,\r\n\t//touchRatio: 0,\r\n\t//simulateTouch: false,\r\n\tloop: true,\r\n\t//preloadImages: false,\r\n\t//lazy: true,\r\n\t// Dotts\r\n\t// pagination: {\r\n\t// \tel: '.hero__bullets',\r\n\t// \tclickable: true,\r\n\t// },\r\n\t// Arrows\r\n\tnavigation: {\r\n\t\tnextEl: '.top-sales__arrow_right',\r\n\t\tprevEl: '.top-sales__arrow_left',\r\n\t},\r\n\r\n\tbreakpoints: {\r\n\t\t320: {\r\n\t\t\tslidesPerView: 2.5,\r\n\t\t\tspaceBetween: 16\r\n\t\t},\r\n\t\t600: {\r\n\t\t\tslidesPerView: 3,\r\n\t\t\tspaceBetween: 20,\r\n\t\t},\r\n\t\t1268: {\r\n\t\t\tslidesPerView: 4,\r\n\t\t\tspaceBetween: 30,\r\n\t\t},\r\n\t},\r\n\r\n\ton: {\r\n\t\tlazyImageReady: function () {\r\n\t\t\tibg();\r\n\t\t},\r\n\t}\r\n\t// And if we need scrollbar\r\n\t//scrollbar: {\r\n\t//\tel: '.swiper-scrollbar',\r\n\t//},\r\n});\r\n\r\nlet sliderCompare = new Swiper('.products-comparison__items', {\r\n\tslidesPerView: 3,\r\n\tspeed: 800,\r\n\twatchSlidesVisibility: true,\r\n\twatchOverflow: true,\r\n\t// autoHeight: true,\r\n\t//preloadImages: false,\r\n\t//lazy: true,\r\n\t// Dotts\r\n\t// pagination: {\r\n\t// \tel: '.hero__bullets',\r\n\t// \tclickable: true,\r\n\t// },\r\n\tscrollbar: {\r\n\t\tel: '.products-comparison__scroll-bar',\r\n\t\tdraggable: true,\r\n\t  },\r\n\t// Arrows\r\n\tnavigation: {\r\n\t\tnextEl: '.top-sales__arrow_right',\r\n\t\tprevEl: '.top-sales__arrow_left',\r\n\t},\r\n\r\n\tbreakpoints: {\r\n\t\t320: {\r\n\t\t\tslidesPerView: 2,\r\n\t\t\tslidesPerGroup: 1,\r\n\t\t\tspaceBetween: 20,\r\n\t\t\ttouchRatio: 1,\r\n\t\t\tsimulateTouch: true,\r\n\t\t\t\r\n\t\t},\r\n\t\t475: {\r\n\t\t\tslidesPerView: 1.2,\r\n\t\t},\r\n\t\t768: {\r\n\t\t\tslidesPerView: 2,\r\n\t\t\t\r\n\t\t},\r\n\t\t1200: {\r\n\t\t\ttouchRatio: 0,\r\n\t\t\tsimulateTouch: false,\r\n\t\t\tspaceBetween: 0,\r\n\t\t},\r\n\t\t1387: {\r\n\t\t\tslidesPerView: 3,\r\n\t\t},\r\n\t},\r\n\r\n\ton: {\r\n\t\tlazyImageReady: function () {\r\n\t\t\tibg();\r\n\t\t},\r\n\t}\r\n\t// And if we need scrollbar\r\n\t//scrollbar: {\r\n\t//\tel: '.swiper-scrollbar',\r\n\t//},\r\n});\r\n\r\n\r\n\r\n//==========================Слайдер с Прогресс баром==============================================================================================================================\r\n\r\n\r\nfunction sliders_bild_callback(params) { }\r\n\r\nlet sliderScrollItems = document.querySelectorAll('._swiper_scroll');\r\nif (sliderScrollItems.length > 0) {\r\n\tfor (let index = 0; index < sliderScrollItems.length; index++) {\r\n\t\tconst sliderScrollItem = sliderScrollItems[index];\r\n\t\tconst sliderScrollBar = sliderScrollItem.querySelector('.swiper-scrollbar');\r\n\t\tconst sliderScroll = new Swiper(sliderScrollItem, {\r\n\t\t\tobserver: true,\r\n\t\t\tobserveParents: true,\r\n\t\t\tdirection: 'vertical',\r\n\t\t\tslidesPerView: 'auto',\r\n\t\t\tfreeMode: true,\r\n\t\t\tscrollbar: {\r\n\t\t\t\tel: sliderScrollBar,\r\n\t\t\t\tdraggable: true,\r\n\t\t\t\tsnapOnRelease: false\r\n\t\t\t},\r\n\t\t\tmousewheel: {\r\n\t\t\t\treleaseOnEdges: true,\r\n\t\t\t},\r\n\t\t});\r\n\t\tsliderScroll.scrollbar.updateSize();\r\n\t}\r\n}\r\n\r\n\r\n// //Слайдер с добавлением фракций\r\n// let sliderOurSpaces;\r\n// let allSlides = document.querySelector('._fraction__all'); //Находим блок с счетчиком общего количества фракций\r\n// let allCurrentSlide = document.querySelector('._fraction__current'); //Находим блок с счетчиком текущего номера фракции\r\n// const allSlidesCounter = document.querySelectorAll('.gallery__link').length; //Вычесляем общее количество слайдов\r\n\r\n// sliderOurSpaces = new Swiper('.gallery__slider', {\r\n// \tobserver: true,\r\n// \tobserveParents: true,\r\n// \tslidesPerView: 3,\r\n// \tspaceBetween: 30,\r\n// \twatchSlidesVisibility: true,\r\n// \tspeed: 800,\r\n// \tloop: true,\r\n// \t//preloadImages: false,\r\n// \t//lazy: true,\r\n// \t// Dotts\r\n// \tnavigation: {\r\n// \t\tnextEl: '.header-our-spaces__arrow_right',\r\n// \t\tprevEl: '.header-our-spaces__arrow_left',\r\n// \t},\r\n// \tpagination: {\r\n// \t\tel: '.slider-our-spaces__progress',\r\n// \t\ttype: 'progressbar',\r\n// \t},\r\n// \tbreakpoints: {\r\n// \t\t// when window width is >= 320px\r\n// \t\t320: {\r\n// \t\t\tslidesPerView: 1.1,\r\n// \t\t\tspaceBetween: 15,\r\n// \t\t\t//autoHeight: true,\r\n// \t\t},\r\n// \t\t// when window width is >= 480px\r\n// \t\t550: {\r\n// \t\t\tslidesPerView: 2,\r\n// \t\t\tspaceBetween: 30\r\n// \t\t},\r\n// \t\t// when window width is >= 640px\r\n// \t\t992: {\r\n// \t\t\tslidesPerView: 3,\r\n// \t\t\tspaceBetween: 30\r\n// \t\t}\r\n// \t},\r\n// \ton: {\r\n// \t\tlazyImageReady: function () {\r\n// \t\t\tibg();\r\n// \t\t},\r\n// \t\tinit: function (slider) {\r\n// \t\t\tallSlides.innerHTML = setZeroFormat(allSlidesCounter);\r\n// \t\t},\r\n// \t\tslideChange: function (slider) {\r\n// \t\t\tlet currentSlide = ++slider.realIndex;\r\n// \t\t\tallCurrentSlide.innerHTML = setZeroFormat(currentSlide);\r\n// \t\t},\r\n// \t}\r\n// });\r\n\r\n// function setZeroFormat(item) {\r\n// \tlet result = item >= 10 ? item : \"0\" + item;\r\n// \treturn result;\r\n// }\r\n//Стили под прогресс бар можно найти в ui.scss\r\n\r\n\r\n//===========================Одновременно несколько слайдеров у каждого рабоает пагинация и фракции (для корректной работы нужно одинаковое количество слайдов, controls и tabs)=============================================================================================================================\r\n// const sliderBlocks = document.querySelectorAll('.slider-our-spaces__block'); //Находим все слайдеры (в этом примере каждый слайдер в оболочке находится, соответсвенно мы ищем оболочку по факту)\r\n// function initOurFacilitiesSlider() {\r\n\r\n// \tif (sliderBlocks.length > 0) {\r\n// \t\tsliderBlocks.forEach((sliderBlock, index) => {\r\n// \t\t\tsliderBlock.classList.add('_show'); //Открываем все блоки для правильного считавания информации swipera\r\n// \t\t\tconst slider = sliderBlock.querySelector('.slider-our-spaces__slider'); //Находим внутри оболочки сам слайдер (тот на который мы вешаем класс swiper)\r\n// \t\t\tconst allFraction = document.querySelectorAll('.controls-slider-our-spaces__item')[index].querySelector('._fraction__all'); //Получаем общее кол-во фракций у текущего слайдера\r\n// \t\t\tconst currentFraction = document.querySelectorAll('.controls-slider-our-spaces__item')[index].querySelector('._fraction__current'); //Получаем текущий номер фракций у текущего слайдера\r\n// \t\t\tconst currentIndexPagination = document.querySelectorAll('.controls-slider-our-spaces__item')[index].querySelector('.slider-our-spaces__progress'); //Получаем текущий индекс пагинации\r\n// \t\t\tconst allSlides = slider.querySelectorAll('.slider-our-spaces__slide').length; //Получаем общее колличество слайдов у текущего слайдера\r\n// \t\t\tconst sliderItem = new Swiper(slider, {\r\n// \t\t\t\tobserver: true,\r\n// \t\t\t\tobserveParents: true,\r\n// \t\t\t\tslidesPerView: 1,\r\n// \t\t\t\tspaceBetween: 0,\r\n// \t\t\t\t//watchSlidesVisibility: true,\r\n// \t\t\t\tspeed: 800,\r\n// \t\t\t\tloop: true,\r\n// \t\t\t\tpagination: {\r\n// \t\t\t\t\tel: currentIndexPagination, //Подставляем найденое выше значение\r\n// \t\t\t\t\ttype: 'progressbar',\r\n// \t\t\t\t},\r\n// \t\t\t\ton: {\r\n// \t\t\t\t\tlazyImageReady: function () {\r\n// \t\t\t\t\t\tibg();\r\n// \t\t\t\t\t},\r\n// \t\t\t\t\tinit: function () {\r\n// \t\t\t\t\t\tallFraction.innerHTML = setZeroFormat(allSlides);\r\n// \t\t\t\t\t},\r\n// \t\t\t\t\tslideChange: function (sl) {\r\n// \t\t\t\t\t\tlet currentSlide = ++sl.realIndex;\r\n// \t\t\t\t\t\tcurrentFraction.innerHTML = setZeroFormat(currentSlide);\r\n// \t\t\t\t\t},\r\n// \t\t\t\t}\r\n// \t\t\t});\r\n// \t\t\tsliderBlock.classList.remove('_show'); //После инициализации слайдера скрываем от показа все блоки\r\n// \t\t});\r\n// \t}\r\n// }\r\n// initOurFacilitiesSlider();\r\n\r\n// const tabsWrapper = document.querySelector('.slider-our-spaces__tabs'); //Находим оболочку с табами\r\n\r\n// //Вешаем прослушку на клик по табам\r\n// tabsWrapper.addEventListener(\"click\", function (e) {\r\n// \tconst targetElement = e.target; //Получаем индекс обьекта по которому нажали именно\r\n// \tif (targetElement.classList.contains('tabs-slider-our-spaces__item')) { //Проверяем что нажали именно по табу\r\n// \t\tconst tabsElements = Array.from(document.querySelectorAll('.tabs-slider-our-spaces__item')); //Получаем коллекцию всех табов и переделываем их в массив с помощью Array.from\r\n// \t\ttabsElements.forEach(item => item.classList.remove('_active')); //Убираем у всех табов класс\r\n// \t\ttargetElement.classList.add('_active'); //Добавлем класс только нажатому\r\n\r\n// \t\tconst index = tabsElements.findIndex(item => item.classList.contains('_active')); //Находим нужный таб с классом active\r\n\r\n// \t\tconst slidersControls = document.querySelectorAll('.controls-slider-our-spaces__item');\r\n// \t\tslidersControls.forEach(item => item.classList.remove('_active'));\r\n\r\n// \t\tsliderBlocks.forEach(item => item.classList.remove('_active')); //Убираем у всех слайдеров класс active\r\n\r\n// \t\tslidersControls[index].classList.add('_active');\r\n// \t\tsliderBlocks[index].classList.add('_active'); //Добавлем только нужному слайдеру класс active\r\n// \t}\r\n// });\r\n\r\n\r\n\r\n\r\n\r\n// //========================================================================================================================================================\r\n// function setZeroFormat(item) {\r\n// \tlet result = item >= 10 ? item : \"0\" + item;\r\n// \treturn result;\r\n// }\r\n\r\n\r\n\r\nvar ua = window.navigator.userAgent;\r\nvar msie = ua.indexOf(\"MSIE \");\r\nvar isMobile = {\r\n\tAndroid: function () {\r\n\t\treturn navigator.userAgent.match(/Android/i);\r\n\t},\r\n\tBlackBerry: function () {\r\n\t\treturn navigator.userAgent.match(/BlackBerry/i);\r\n\t},\r\n\tiOS: function () {\r\n\t\treturn navigator.userAgent.match(/iPhone|iPad|iPod/i);\r\n\t},\r\n\tOpera: function () {\r\n\t\treturn navigator.userAgent.match(/Opera Mini/i);\r\n\t},\r\n\tWindows: function () {\r\n\t\treturn navigator.userAgent.match(/IEMobile/i);\r\n\t},\r\n\tany: function () {\r\n\t\treturn (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows());\r\n\t}\r\n};\r\n\r\nfunction isIE() {\r\n\tua = navigator.userAgent;\r\n\tvar is_ie = ua.indexOf(\"MSIE \") > -1 || ua.indexOf(\"Trident/\") > -1;\r\n\treturn is_ie;\r\n}\r\nif (isIE()) {\r\n\tdocument.querySelector('html').classList.add('ie');\r\n}\r\nif (isMobile.any()) {\r\n\tdocument.querySelector('html').classList.add('_touch');\r\n}\r\n\r\nfunction testWebP(callback) {\r\n\tvar webP = new Image();\r\n\twebP.onload = webP.onerror = function () {\r\n\t\tcallback(webP.height == 2);\r\n\t};\r\n\twebP.src = \"data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA\";\r\n}\r\ntestWebP(function (support) {\r\n\tif (support === true) {\r\n\t\tdocument.querySelector('html').classList.add('_webp');\r\n\t} else {\r\n\t\tdocument.querySelector('html').classList.add('_no-webp');\r\n\t}\r\n});\r\n\r\nfunction ibg() {\r\n\tif (isIE()) {\r\n\t\tlet ibg = document.querySelectorAll(\"._ibg\");\r\n\t\tfor (var i = 0; i < ibg.length; i++) {\r\n\t\t\tif (ibg[i].querySelector('img') && ibg[i].querySelector('img').getAttribute('src') != null) {\r\n\t\t\t\tibg[i].style.backgroundImage = 'url(' + ibg[i].querySelector('img').getAttribute('src') + ')';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\nibg();\r\n\r\nwindow.addEventListener(\"load\", function () {\r\n\tif (document.querySelector('.wrapper')) {\r\n\t\tsetTimeout(function () {\r\n\t\t\tdocument.querySelector('.wrapper').classList.add('_loaded');\r\n\t\t}, 0);\r\n\t}\r\n});\r\n\r\nlet unlock = true;\r\n\r\n\r\n//=====================Init specifications spollers if specifications items lenght > 5================================\r\n\r\n\r\n\r\nif (isMobile.any()) {\r\n\tlet itemsBlock = document.querySelector('.specifications__content');\r\n\tlet specificationsItems = document.querySelectorAll('.specifications__item');\r\n\tlet itemsLenght = specificationsItems.length;\r\n\r\n\tif (itemsBlock) {\r\n\t\titemsBlock.classList.add('_spollers');\r\n\t}\r\n\r\n\r\n\tif (itemsLenght > 0) {\r\n\t\tspecificationsItems.forEach(specificationsItem => {\r\n\t\t\tlet specificationsItemElements =specificationsItem.querySelectorAll('.specifications__row');\r\n\t\t\tif (specificationsItemElements.length > 5) {\r\n\t\t\t\tlet hiddenSpollersBlock = document.createElement('div');\r\n\t\t\t\thiddenSpollersBlock.classList.add('_hide');\r\n\t\t\t\tspecificationsItem.querySelector('.specifications__body').append(hiddenSpollersBlock);\r\n\r\n\r\n\t\t\t\tlet link = '<button type=\"button\" class=\"specifications__link\">Смотреть все характеристики</button>';\r\n\t\t\t\tfor (let index = 0; index < specificationsItemElements.length; index++) {\r\n\t\t\t\t\tconst element = specificationsItemElements[index];\r\n\t\t\t\t\tif (index == 4) {\r\n\t\t\t\t\t\telement.insertAdjacentHTML('afterend', link);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (index > 4) {\r\n\t\t\t\t\t\thiddenSpollersBlock.append(element);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tsetSpollerClass();\r\n\t}\r\n}\r\nfunction setSpollerClass() {\r\n\tlet spollersLinks =document.querySelectorAll('.specifications__link');\r\n\tif (spollersLinks) {\r\n\t\tspollersLinks.forEach(spollersLink => {\r\n\t\t\tspollersLink.classList.add('_spoller');\r\n\t\r\n\t\t\tspollersLink.addEventListener(\"click\", function(e) {\r\n\t\t\t\tspollersLink.classList.add('_hide');\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n}\r\n\r\n//=================\r\n//ActionsOnHash\r\nif (location.hash) {\r\n\tconst hsh = location.hash.replace('#', '');\r\n\tif (document.querySelector('.popup_' + hsh)) {\r\n\t\tpopup_open(hsh);\r\n\t} else if (document.querySelector('div.' + hsh)) {\r\n\t\t_goto(document.querySelector('.' + hsh), 500, '');\r\n\t}\r\n}\r\n//=================\r\n//Menu\r\nlet iconMenu = document.querySelector(\".icon-menu\");\r\nif (iconMenu != null) {\r\n\tlet delay = 500;\r\n\tlet menuBody = document.querySelector(\".menu__body\");\r\n\ticonMenu.addEventListener(\"click\", function (e) {\r\n\t\tif (unlock) {\r\n\t\t\tbody_lock(delay);\r\n\t\t\ticonMenu.classList.toggle(\"_active\");\r\n\t\t\tmenuBody.classList.toggle(\"_active\");\r\n\t\t}\r\n\t});\r\n};\r\n\r\nfunction menu_close() {\r\n\tlet iconMenu = document.querySelector(\".icon-menu\");\r\n\tlet menuBody = document.querySelector(\".menu__body\");\r\n\ticonMenu.classList.remove(\"_active\");\r\n\tmenuBody.classList.remove(\"_active\");\r\n}\r\n//=================\r\n//BodyLock\r\nfunction body_lock(delay) {\r\n\tlet body = document.querySelector(\"body\");\r\n\tif (body.classList.contains('_lock')) {\r\n\t\tbody_lock_remove(delay);\r\n\t} else {\r\n\t\tbody_lock_add(delay);\r\n\t}\r\n}\r\n\r\nfunction body_lock_remove(delay) {\r\n\tlet body = document.querySelector(\"body\");\r\n\tif (unlock) {\r\n\t\tlet lock_padding = document.querySelectorAll(\"._lp\");\r\n\t\tsetTimeout(() => {\r\n\t\t\tfor (let index = 0; index < lock_padding.length; index++) {\r\n\t\t\t\tconst el = lock_padding[index];\r\n\t\t\t\tel.style.paddingRight = '0px';\r\n\t\t\t}\r\n\t\t\tbody.style.paddingRight = '0px';\r\n\t\t\tbody.classList.remove(\"_lock\");\r\n\t\t}, delay);\r\n\r\n\t\tunlock = false;\r\n\t\tsetTimeout(function () {\r\n\t\t\tunlock = true;\r\n\t\t}, delay);\r\n\t}\r\n}\r\n\r\nfunction body_lock_add(delay) {\r\n\tlet body = document.querySelector(\"body\");\r\n\tif (unlock) {\r\n\t\tlet lock_padding = document.querySelectorAll(\"._lp\");\r\n\t\tfor (let index = 0; index < lock_padding.length; index++) {\r\n\t\t\tconst el = lock_padding[index];\r\n\t\t\tel.style.paddingRight = window.innerWidth - document.querySelector('.wrapper').offsetWidth + 'px';\r\n\t\t}\r\n\t\tbody.style.paddingRight = window.innerWidth - document.querySelector('.wrapper').offsetWidth + 'px';\r\n\t\tbody.classList.add(\"_lock\");\r\n\r\n\t\tunlock = false;\r\n\t\tsetTimeout(function () {\r\n\t\t\tunlock = true;\r\n\t\t}, delay);\r\n\t}\r\n}\r\n//=================\r\n// LettersAnimation\r\nlet title = document.querySelectorAll('._letter-animation');\r\nif (title) {\r\n\tfor (let index = 0; index < title.length; index++) {\r\n\t\tlet el = title[index];\r\n\t\tlet txt = el.innerHTML;\r\n\t\tlet txt_words = txt.replace('  ', ' ').split(' ');\r\n\t\tlet new_title = '';\r\n\t\tfor (let index = 0; index < txt_words.length; index++) {\r\n\t\t\tlet txt_word = txt_words[index];\r\n\t\t\tlet len = txt_word.length;\r\n\t\t\tnew_title = new_title + '<p>';\r\n\t\t\tfor (let index = 0; index < len; index++) {\r\n\t\t\t\tlet it = txt_word.substr(index, 1);\r\n\t\t\t\tif (it == ' ') {\r\n\t\t\t\t\tit = '&nbsp;';\r\n\t\t\t\t}\r\n\t\t\t\tnew_title = new_title + '<span>' + it + '</span>';\r\n\t\t\t}\r\n\t\t\tel.innerHTML = new_title;\r\n\t\t\tnew_title = new_title + '&nbsp;</p>';\r\n\t\t}\r\n\t}\r\n}\r\n//=================\r\n//Tabs\r\nlet tabs = document.querySelectorAll(\"._tabs\");\r\nfor (let index = 0; index < tabs.length; index++) {\r\n\tlet tab = tabs[index];\r\n\tlet tabs_items = tab.querySelectorAll(\"._tabs-item\");\r\n\tlet tabs_blocks = tab.querySelectorAll(\"._tabs-block\");\r\n\tfor (let index = 0; index < tabs_items.length; index++) {\r\n\t\tlet tabs_item = tabs_items[index];\r\n\t\ttabs_item.addEventListener(\"click\", function (e) {\r\n\t\t\tfor (let index = 0; index < tabs_items.length; index++) {\r\n\t\t\t\tlet tabs_item = tabs_items[index];\r\n\t\t\t\ttabs_item.classList.remove('_active');\r\n\t\t\t\ttabs_blocks[index].classList.remove('_active');\r\n\t\t\t}\r\n\t\t\ttabs_item.classList.add('_active');\r\n\t\t\ttabs_blocks[index].classList.add('_active');\r\n\t\t\te.preventDefault();\r\n\t\t});\r\n\t}\r\n}\r\n//=================\r\n//Spollers\r\nlet spollers = document.querySelectorAll(\"._spoller\");\r\nlet spollersGo = true;\r\nif (spollers.length > 0) {\r\n\r\n\tfunction spollerCLick(e) {\r\n\t\tconst spoller = e.target.classList.contains('_spoller') ? e.target : e.target.closest('._spoller');\r\n\t\tif (spollersGo) {\r\n\t\t\tspollersGo = false;\r\n\r\n\t\t\tif (spoller.closest('._spollers').classList.contains('_one')) {\r\n\t\t\t\tlet curent_spollers = spoller.closest('._spollers').querySelectorAll('._spoller');\r\n\t\t\t\tfor (let i = 0; i < curent_spollers.length; i++) {\r\n\t\t\t\t\tlet el = curent_spollers[i];\r\n\t\t\t\t\tif (el != spoller) {\r\n\t\t\t\t\t\tel.classList.remove('_active');\r\n\t\t\t\t\t\t_slideUp(el.nextElementSibling);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tspoller.classList.toggle('_active');\r\n\t\t\t_slideToggle(spoller.nextElementSibling);\r\n\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tspollersGo = true;\r\n\t\t\t}, 500);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction spollersInit() {\r\n\t\tfor (let index = 0; index < spollers.length; index++) {\r\n\t\t\tconst spoller = spollers[index];\r\n\t\t\tlet spollerMax = spoller.getAttribute('data-max');\r\n\r\n\t\t\tif (spollerMax && window.innerWidth > spollerMax) {\r\n\t\t\t\tif (spoller.classList.contains('_init')) {\r\n\t\t\t\t\tspoller.classList.remove('_active');\r\n\t\t\t\t\tspoller.classList.remove('_init');\r\n\t\t\t\t\tspoller.nextElementSibling.style.cssText = '';\r\n\t\t\t\t\tspoller.removeEventListener(\"click\", spollerCLick);\r\n\t\t\t\t}\r\n\t\t\t} else if (!spoller.classList.contains('_init')) {\r\n\t\t\t\tspoller.classList.add('_init');\r\n\t\t\t\tspoller.addEventListener(\"click\", spollerCLick);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction spollersShowActive() {\r\n\t\tfor (let index = 0; index < spollers.length; index++) {\r\n\t\t\tconst spoller = spollers[index];\r\n\t\t\tif (spoller.classList.contains('_active')) {\r\n\t\t\t\t_slideToggle(spoller.nextElementSibling);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\twindow.addEventListener(\"resize\", spollersInit);\r\n\r\n\tsetTimeout(function () {\r\n\t\tspollersShowActive();\r\n\t\tspollersInit();\r\n\t}, 0);\r\n}\r\n//=================\r\n//Gallery\r\nlet gallery = document.querySelectorAll('._gallery');\r\nif (gallery) {\r\n\tgallery_init();\r\n}\r\n\r\nfunction gallery_init() {\r\n\tfor (let index = 0; index < gallery.length; index++) {\r\n\t\tconst el = gallery[index];\r\n\t\tlightGallery(el, {\r\n\t\t\tcounter: false,\r\n\t\t\tselector: 'a',\r\n\t\t\tdownload: false\r\n\t\t});\r\n\t}\r\n}\r\n//=================\r\n//SearchInList\r\nfunction search_in_list(input) {\r\n\tlet ul = input.parentNode.querySelector('ul')\r\n\tlet li = ul.querySelectorAll('li');\r\n\tlet filter = input.value.toUpperCase();\r\n\r\n\tfor (i = 0; i < li.length; i++) {\r\n\t\tlet el = li[i];\r\n\t\tlet item = el;\r\n\t\ttxtValue = item.textContent || item.innerText;\r\n\t\tif (txtValue.toUpperCase().indexOf(filter) > -1) {\r\n\t\t\tel.style.display = \"\";\r\n\t\t} else {\r\n\t\t\tel.style.display = \"none\";\r\n\t\t}\r\n\t}\r\n}\r\n//=================\r\n//DigiFormat\r\nfunction digi(str) {\r\n\tvar r = str.toString().replace(/(\\d)(?=(\\d\\d\\d)+([^\\d]|$))/g, \"$1 \");\r\n\treturn r;\r\n}\r\n//=================\r\n//DiGiAnimate\r\nfunction digi_animate(digi_animate) {\r\n\tif (digi_animate.length > 0) {\r\n\t\tfor (let index = 0; index < digi_animate.length; index++) {\r\n\t\t\tconst el = digi_animate[index];\r\n\t\t\tconst el_to = parseInt(el.innerHTML.replace(' ', ''));\r\n\t\t\tif (!el.classList.contains('_done')) {\r\n\t\t\t\tdigi_animate_value(el, 0, el_to, 1500);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction digi_animate_value(el, start, end, duration) {\r\n\tvar obj = el;\r\n\tvar range = end - start;\r\n\t// no timer shorter than 50ms (not really visible any way)\r\n\tvar minTimer = 50;\r\n\t// calc step time to show all interediate values\r\n\tvar stepTime = Math.abs(Math.floor(duration / range));\r\n\r\n\t// never go below minTimer\r\n\tstepTime = Math.max(stepTime, minTimer);\r\n\r\n\t// get current time and calculate desired end time\r\n\tvar startTime = new Date().getTime();\r\n\tvar endTime = startTime + duration;\r\n\tvar timer;\r\n\r\n\tfunction run() {\r\n\t\tvar now = new Date().getTime();\r\n\t\tvar remaining = Math.max((endTime - now) / duration, 0);\r\n\t\tvar value = Math.round(end - (remaining * range));\r\n\t\tobj.innerHTML = digi(value);\r\n\t\tif (value == end) {\r\n\t\t\tclearInterval(timer);\r\n\t\t}\r\n\t}\r\n\r\n\ttimer = setInterval(run, stepTime);\r\n\trun();\r\n\r\n\tel.classList.add('_done');\r\n}\r\n//=================\r\n//Popups\r\nlet popup_link = document.querySelectorAll('._popup-link');\r\nlet popups = document.querySelectorAll('.popup');\r\nfor (let index = 0; index < popup_link.length; index++) {\r\n\tconst el = popup_link[index];\r\n\tel.addEventListener('click', function (e) {\r\n\t\tif (unlock) {\r\n\t\t\tlet item = el.getAttribute('href').replace('#', '');\r\n\t\t\tlet video = el.getAttribute('data-video');\r\n\t\t\tpopup_open(item, video);\r\n\t\t}\r\n\t\te.preventDefault();\r\n\t})\r\n}\r\nfor (let index = 0; index < popups.length; index++) {\r\n\tconst popup = popups[index];\r\n\tpopup.addEventListener(\"click\", function (e) {\r\n\t\tif (!e.target.closest('.popup__body')) {\r\n\t\t\tpopup_close(e.target.closest('.popup'));\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction popup_open(item, video = '') {\r\n\tlet activePopup = document.querySelectorAll('.popup._active');\r\n\tif (activePopup.length > 0) {\r\n\t\tpopup_close('', false);\r\n\t}\r\n\tlet curent_popup = document.querySelector('.popup_' + item);\r\n\tif (curent_popup && unlock) {\r\n\t\tif (video != '' && video != null) {\r\n\t\t\tlet popup_video = document.querySelector('.popup_video');\r\n\t\t\tpopup_video.querySelector('.popup__video').innerHTML = '<iframe src=\"https://www.youtube.com/embed/' + video + '?autoplay=1\"  allow=\"autoplay; encrypted-media\" allowfullscreen></iframe>';\r\n\t\t}\r\n\t\tif (!document.querySelector('.menu__body._active')) {\r\n\t\t\tbody_lock_add(500);\r\n\t\t}\r\n\t\tcurent_popup.classList.add('_active');\r\n\t\thistory.pushState('', '', '#' + item);\r\n\t}\r\n}\r\n\r\nfunction popup_close(item, bodyUnlock = true) {\r\n\tif (unlock) {\r\n\t\tif (!item) {\r\n\t\t\tfor (let index = 0; index < popups.length; index++) {\r\n\t\t\t\tconst popup = popups[index];\r\n\t\t\t\tlet video = popup.querySelector('.popup__video');\r\n\t\t\t\tif (video) {\r\n\t\t\t\t\tvideo.innerHTML = '';\r\n\t\t\t\t}\r\n\t\t\t\tpopup.classList.remove('_active');\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tlet video = item.querySelector('.popup__video');\r\n\t\t\tif (video) {\r\n\t\t\t\tvideo.innerHTML = '';\r\n\t\t\t}\r\n\t\t\titem.classList.remove('_active');\r\n\t\t}\r\n\t\tif (!document.querySelector('.menu__body._active') && bodyUnlock) {\r\n\t\t\tbody_lock_remove(500);\r\n\t\t}\r\n\t\thistory.pushState('', '', window.location.href.split('#')[0]);\r\n\t}\r\n}\r\nlet popup_close_icon = document.querySelectorAll('.popup__close,._popup-close');\r\nif (popup_close_icon) {\r\n\tfor (let index = 0; index < popup_close_icon.length; index++) {\r\n\t\tconst el = popup_close_icon[index];\r\n\t\tel.addEventListener('click', function () {\r\n\t\t\tpopup_close(el.closest('.popup'));\r\n\t\t})\r\n\t}\r\n}\r\ndocument.addEventListener('keydown', function (e) {\r\n\tif (e.code === 'Escape') {\r\n\t\tpopup_close();\r\n\t}\r\n});\r\n\r\n//=================\r\n//SlideToggle\r\nlet _slideUp = (target, duration = 500) => {\r\n\ttarget.style.transitionProperty = 'height, margin, padding';\r\n\ttarget.style.transitionDuration = duration + 'ms';\r\n\ttarget.style.height = target.offsetHeight + 'px';\r\n\ttarget.offsetHeight;\r\n\ttarget.style.overflow = 'hidden';\r\n\ttarget.style.height = 0;\r\n\ttarget.style.paddingTop = 0;\r\n\ttarget.style.paddingBottom = 0;\r\n\ttarget.style.marginTop = 0;\r\n\ttarget.style.marginBottom = 0;\r\n\twindow.setTimeout(() => {\r\n\t\ttarget.style.display = 'none';\r\n\t\ttarget.style.removeProperty('height');\r\n\t\ttarget.style.removeProperty('padding-top');\r\n\t\ttarget.style.removeProperty('padding-bottom');\r\n\t\ttarget.style.removeProperty('margin-top');\r\n\t\ttarget.style.removeProperty('margin-bottom');\r\n\t\ttarget.style.removeProperty('overflow');\r\n\t\ttarget.style.removeProperty('transition-duration');\r\n\t\ttarget.style.removeProperty('transition-property');\r\n\t\ttarget.classList.remove('_slide');\r\n\t}, duration);\r\n}\r\nlet _slideDown = (target, duration = 500) => {\r\n\ttarget.style.removeProperty('display');\r\n\tlet display = window.getComputedStyle(target).display;\r\n\tif (display === 'none')\r\n\t\tdisplay = 'block';\r\n\r\n\ttarget.style.display = display;\r\n\tlet height = target.offsetHeight;\r\n\ttarget.style.overflow = 'hidden';\r\n\ttarget.style.height = 0;\r\n\ttarget.style.paddingTop = 0;\r\n\ttarget.style.paddingBottom = 0;\r\n\ttarget.style.marginTop = 0;\r\n\ttarget.style.marginBottom = 0;\r\n\ttarget.offsetHeight;\r\n\ttarget.style.transitionProperty = \"height, margin, padding\";\r\n\ttarget.style.transitionDuration = duration + 'ms';\r\n\ttarget.style.height = height + 'px';\r\n\ttarget.style.removeProperty('padding-top');\r\n\ttarget.style.removeProperty('padding-bottom');\r\n\ttarget.style.removeProperty('margin-top');\r\n\ttarget.style.removeProperty('margin-bottom');\r\n\twindow.setTimeout(() => {\r\n\t\ttarget.style.removeProperty('height');\r\n\t\ttarget.style.removeProperty('overflow');\r\n\t\ttarget.style.removeProperty('transition-duration');\r\n\t\ttarget.style.removeProperty('transition-property');\r\n\t\ttarget.classList.remove('_slide');\r\n\t}, duration);\r\n}\r\nlet _slideToggle = (target, duration = 500) => {\r\n\tif (!target.classList.contains('_slide')) {\r\n\t\ttarget.classList.add('_slide');\r\n\t\tif (window.getComputedStyle(target).display === 'none') {\r\n\t\t\treturn _slideDown(target, duration);\r\n\t\t} else {\r\n\t\t\treturn _slideUp(target, duration);\r\n\t\t}\r\n\t}\r\n}\r\n//========================================\r\n//Wrap\r\nfunction _wrap(el, wrapper) {\r\n\tel.parentNode.insertBefore(wrapper, el);\r\n\twrapper.appendChild(el);\r\n}\r\n//========================================\r\n//RemoveClasses\r\nfunction _removeClasses(el, class_name) {\r\n\tfor (var i = 0; i < el.length; i++) {\r\n\t\tel[i].classList.remove(class_name);\r\n\t}\r\n}\r\n//========================================\r\n//IsHidden\r\nfunction _is_hidden(el) {\r\n\treturn (el.offsetParent === null)\r\n}\r\n// ShowMore Beta ========================\r\nlet moreBlocks = document.querySelectorAll('._more-block');\r\nif (moreBlocks.length > 0) {\r\n\tlet wrapper = document.querySelector('.wrapper');\r\n\tfor (let index = 0; index < moreBlocks.length; index++) {\r\n\t\tconst moreBlock = moreBlocks[index];\r\n\t\tlet items = moreBlock.querySelectorAll('._more-item');\r\n\t\tif (items.length > 0) {\r\n\t\t\tlet itemsMore = moreBlock.querySelector('._more-link');\r\n\t\t\tlet itemsContent = moreBlock.querySelector('._more-content');\r\n\t\t\tlet itemsView = itemsContent.getAttribute('data-view');\r\n\t\t\tif (getComputedStyle(itemsContent).getPropertyValue(\"transition-duration\") === '0s') {\r\n\t\t\t\titemsContent.style.cssText = \"transition-duration: 1ms\";\r\n\t\t\t}\r\n\t\t\titemsMore.addEventListener(\"click\", function (e) {\r\n\t\t\t\tif (itemsMore.classList.contains('_active')) {\r\n\t\t\t\t\tsetSize();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetSize('start');\r\n\t\t\t\t}\r\n\t\t\t\titemsMore.classList.toggle('_active');\r\n\t\t\t\te.preventDefault();\r\n\t\t\t});\r\n\r\n\t\t\tlet isScrollStart;\r\n\r\n\t\t\tfunction setSize(type) {\r\n\t\t\t\tlet resultHeight;\r\n\t\t\t\tlet itemsContentHeight = 0;\r\n\t\t\t\tlet itemsContentStartHeight = 0;\r\n\r\n\t\t\t\tfor (let index = 0; index < items.length; index++) {\r\n\t\t\t\t\tif (index < itemsView) {\r\n\t\t\t\t\t\titemsContentHeight += items[index].offsetHeight;\r\n\t\t\t\t\t}\r\n\t\t\t\t\titemsContentStartHeight += items[index].offsetHeight;\r\n\t\t\t\t}\r\n\t\t\t\tresultHeight = (type === 'start') ? itemsContentStartHeight : itemsContentHeight;\r\n\t\t\t\tisScrollStart = window.innerWidth - wrapper.offsetWidth;\r\n\t\t\t\titemsContent.style.height = `${resultHeight}px`;\r\n\t\t\t}\r\n\r\n\t\t\titemsContent.addEventListener(\"transitionend\", updateSize, false);\r\n\r\n\t\t\tfunction updateSize() {\r\n\t\t\t\tlet isScrollEnd = window.innerWidth - wrapper.offsetWidth;\r\n\t\t\t\tif (isScrollStart === 0 && isScrollEnd > 0 || isScrollStart > 0 && isScrollEnd === 0) {\r\n\t\t\t\t\tif (itemsMore.classList.contains('_active')) {\r\n\t\t\t\t\t\tsetSize('start');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsetSize();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\twindow.addEventListener(\"resize\", function (e) {\r\n\t\t\t\tif (!itemsMore.classList.contains('_active')) {\r\n\t\t\t\t\tsetSize();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetSize('start');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tsetSize();\r\n\t\t}\r\n\t}\r\n}\r\n//==RATING======================================\r\nconst ratings = document.querySelectorAll('.rating');\r\nif (ratings.length > 0) {\r\n\tinitRatings();\r\n}\r\n// Основная функция\r\nfunction initRatings() {\r\n\tlet ratingActive, ratingValue;\r\n\t// \"Бегаем\" по всем рейтингам на странице\r\n\tfor (let index = 0; index < ratings.length; index++) {\r\n\t\tconst rating = ratings[index];\r\n\t\tif (!rating.classList.contains('no-active')) {\r\n\t\t\tinitRating(rating);\r\n\t\t}\r\n\t}\r\n\r\n\t// Инициализируем конкретный рейтинг\r\n\tfunction initRating(rating) {\r\n\t\tinitRatingVars(rating);\r\n\r\n\t\tsetRatingActiveWidth();\r\n\r\n\t\tif (rating.classList.contains('rating_set')) {\r\n\t\t\tsetRating(rating);\r\n\t\t}\r\n\t}\r\n\r\n\t// Инициализайция переменных\r\n\tfunction initRatingVars(rating) {\r\n\t\tratingActive = rating.querySelector('.rating__active');\r\n\t\tratingValue = rating.querySelector('.rating__value');\r\n\t}\r\n\t// Изменяем ширину активных звезд\r\n\tfunction setRatingActiveWidth(index = ratingValue.innerHTML) {\r\n\t\tconst ratingActiveWidth = index / 0.05;\r\n\t\tratingActive.style.width = `${ratingActiveWidth}%`;\r\n\t}\r\n\t// Возможность указать оценку \r\n\tfunction setRating(rating) {\r\n\t\tconst ratingItems = rating.querySelectorAll('.rating__item');\r\n\t\tfor (let index = 0; index < ratingItems.length; index++) {\r\n\t\t\tconst ratingItem = ratingItems[index];\r\n\t\t\tratingItem.addEventListener(\"mouseenter\", function (e) {\r\n\t\t\t\t// Обновление переменных\r\n\t\t\t\tinitRatingVars(rating);\r\n\t\t\t\t// Обновление активных звезд\r\n\t\t\t\tsetRatingActiveWidth(ratingItem.value);\r\n\t\t\t});\r\n\t\t\tratingItem.addEventListener(\"mouseleave\", function (e) {\r\n\t\t\t\t// Обновление активных звезд\r\n\t\t\t\tsetRatingActiveWidth();\r\n\t\t\t});\r\n\t\t\tratingItem.addEventListener(\"click\", function (e) {\r\n\t\t\t\t// Обновление переменных\r\n\t\t\t\tinitRatingVars(rating);\r\n\r\n\t\t\t\tif (rating.dataset.ajax) {\r\n\t\t\t\t\t// \"Отправить\" на сервер\r\n\t\t\t\t\tsetRatingValue(ratingItem.value, rating);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Отобразить указанную оцнку\r\n\t\t\t\t\tratingValue.innerHTML = index + 1;\r\n\t\t\t\t\tsetRatingActiveWidth();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tasync function setRatingValue(value, rating) {\r\n\t\tif (!rating.classList.contains('rating_sending')) {\r\n\t\t\trating.classList.add('rating_sending');\r\n\r\n\t\t\t// Отправика данных (value) на сервер\r\n\t\t\tlet response = await fetch('rating.json', {\r\n\t\t\t\tmethod: 'GET',\r\n\r\n\t\t\t\t//body: JSON.stringify({\r\n\t\t\t\t//\tuserRating: value\r\n\t\t\t\t//}),\r\n\t\t\t\t//headers: {\r\n\t\t\t\t//\t'content-type': 'application/json'\r\n\t\t\t\t//}\r\n\r\n\t\t\t});\r\n\t\t\tif (response.ok) {\r\n\t\t\t\tconst result = await response.json();\r\n\r\n\t\t\t\t// Получаем новый рейтинг\r\n\t\t\t\tconst newRating = result.newRating;\r\n\r\n\t\t\t\t// Вывод нового среднего результата\r\n\t\t\t\tratingValue.innerHTML = newRating;\r\n\r\n\t\t\t\t// Обновление активных звезд\r\n\t\t\t\tsetRatingActiveWidth();\r\n\r\n\t\t\t\trating.classList.remove('rating_sending');\r\n\t\t\t} else {\r\n\t\t\t\talert(\"Ошибка\");\r\n\r\n\t\t\t\trating.classList.remove('rating_sending');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n//=====================Rating================================\r\n//Изменяем ширину активных звезд\r\nlet allRatings = document.querySelectorAll('.rating__active');\r\n\r\nif (allRatings.length > 0) {\r\n\tallRatings.forEach(ratingActive => {\r\n\t\tlet ratingValueBox = ratingActive.closest('.rating').querySelector('.rating__value');\r\n\t\tlet activeRatingValue = ratingActive.getAttribute('data-rating');\r\n\t\t// let activeRatingValue = ratingValue.innerHTML;\r\n\t\t// let ratingValue = ratingActive.innerHTML;\r\n\t\tsetRatingActiveWidth(activeRatingValue, ratingActive);\r\n\t\tif (ratingValueBox) {\r\n\t\t\tratingValueBox.innerHTML = activeRatingValue;\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction setRatingActiveWidth(activeRatingValue, ratingActive) {\r\n\tconst ratingActiveWidth = activeRatingValue / 0.05;\r\n\tratingActive.style.width = `${ratingActiveWidth}%`;\r\n}\r\n//========================================\r\n//Animate\r\nfunction animate({\r\n\ttiming,\r\n\tdraw,\r\n\tduration\r\n}) {\r\n\tlet start = performance.now();\r\n\trequestAnimationFrame(function animate(time) {\r\n\t\t// timeFraction изменяется от 0 до 1\r\n\t\tlet timeFraction = (time - start) / duration;\r\n\t\tif (timeFraction > 1) timeFraction = 1;\r\n\r\n\t\t// вычисление текущего состояния анимации\r\n\t\tlet progress = timing(timeFraction);\r\n\r\n\t\tdraw(progress); // отрисовать её\r\n\r\n\t\tif (timeFraction < 1) {\r\n\t\t\trequestAnimationFrame(animate);\r\n\t\t}\r\n\r\n\t});\r\n}\r\n\r\nfunction makeEaseOut(timing) {\r\n\treturn function (timeFraction) {\r\n\t\treturn 1 - timing(1 - timeFraction);\r\n\t}\r\n}\r\n\r\nfunction makeEaseInOut(timing) {\r\n\treturn function (timeFraction) {\r\n\t\tif (timeFraction < .5)\r\n\t\t\treturn timing(2 * timeFraction) / 2;\r\n\t\telse\r\n\t\t\treturn (2 - timing(2 * (1 - timeFraction))) / 2;\r\n\t}\r\n}\r\n\r\nfunction quad(timeFraction) {\r\n\treturn Math.pow(timeFraction, 2)\r\n}\r\n\r\nfunction circ(timeFraction) {\r\n\treturn 1 - Math.sin(Math.acos(timeFraction));\r\n}\r\n/*\r\nanimate({\r\n\tduration: 1000,\r\n\ttiming: makeEaseOut(quad),\r\n\tdraw(progress) {\r\n\t\twindow.scroll(0, start_position + 400 * progress);\r\n\t}\r\n});*/\r\n\r\n//Полифилы\r\n(function () {\r\n\t// проверяем поддержку\r\n\tif (!Element.prototype.closest) {\r\n\t\t// реализуем\r\n\t\tElement.prototype.closest = function (css) {\r\n\t\t\tvar node = this;\r\n\t\t\twhile (node) {\r\n\t\t\t\tif (node.matches(css)) return node;\r\n\t\t\t\telse node = node.parentElement;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t};\r\n\t}\r\n})();\r\n(function () {\r\n\t// проверяем поддержку\r\n\tif (!Element.prototype.matches) {\r\n\t\t// определяем свойство\r\n\t\tElement.prototype.matches = Element.prototype.matchesSelector ||\r\n\t\t\tElement.prototype.webkitMatchesSelector ||\r\n\t\t\tElement.prototype.mozMatchesSelector ||\r\n\t\t\tElement.prototype.msMatchesSelector;\r\n\t}\r\n})();\r\n\r\n//Sender form\r\n//========================================================================================================================================================\r\n// Отправка данных на сервер\r\nfunction send(event, php) {\r\n\tconsole.log(\"Отправка запроса\");\r\n\tevent.preventDefault ? event.preventDefault() : event.returnValue = false;\r\n\tvar req = new XMLHttpRequest();\r\n\treq.open('POST', php, true);\r\n\treq.onload = function () {\r\n\t\tif (req.status >= 200 && req.status < 400) {\r\n\t\t\tjson = JSON.parse(this.response); // Ебанный internet explorer 11\r\n\t\t\tconsole.log(json);\r\n\r\n\t\t\t// ЗДЕСЬ УКАЗЫВАЕМ ДЕЙСТВИЯ В СЛУЧАЕ УСПЕХА ИЛИ НЕУДАЧИ\r\n\t\t\tif (json.result == \"success\") {\r\n\t\t\t\t// Если сообщение отправлено\r\n\t\t\t\talert(\"Сообщение отправлено\");\r\n\t\t\t} else {\r\n\t\t\t\t// Если произошла ошибка\r\n\t\t\t\talert(\"Ошибка. Сообщение не отправлено\");\r\n\t\t\t}\r\n\t\t\t// Если не удалось связаться с php файлом\r\n\t\t} else {\r\n\t\t\talert(\"Ошибка сервера. Номер: \" + req.status);\r\n\t\t}\r\n\t};\r\n\r\n\t// Если не удалось отправить запрос. Стоит блок на хостинге\r\n\treq.onerror = function () {\r\n\t\talert(\"Ошибка отправки запроса\");\r\n\t};\r\n\treq.send(new FormData(event.target));\r\n}\r\n\r\n\r\n//========================================================================================================================================================\r\n//По клику на стрелочку открывает дополнительный скрытый текст (плавность slideToggle)\r\n\r\nconst help = document.querySelector('.help'); //Находим обьекты открытые для показа (по которым мы нажимаем и выезжает скрытый текст ) \r\nif (help) {\r\n\thelp.addEventListener(\"click\", function (e) {\r\n\t\tconst targetElem = e.target;\r\n\t\tif (targetElem.classList.contains('help__link')) { //Проверяем если у нажатого обьекта есть ссылка для открытия скрытого контента\r\n\t\t\t_slideToggle(targetElem.previousElementSibling, 500); //вызываем функцию \"_slideToggle\" которая отвечает за плавность открытия/закрытия скрытого текста и передаем ей обьект который следует анимировать (в данном случае - это предыдущий обьект перед .help__link) и время анимации.\r\n\t\t\ttargetElem.classList.toggle('_active'); //Вешаем класс на ссылку для анимирования стрелочки\r\n\t\t\te.preventDefault(); //Сбрысываем стандартное поведение у ссылки.\r\n\t\t}\r\n\t\tif (targetElem.classList.contains('help__more')) { //Если у нажатого обьекта есть нужный нам класс, то...\r\n\t\t\tif (!targetElem.classList.contains('_loading')) { //Проверяем если нет \"страховочного\" класса\r\n\t\t\t\ttargetElem.classList.add('_loading'); //Вешаем класс, для страховки от нескольких вызовов\r\n\t\t\t\tgetMoreQuestions(targetElem); //Вызываем функцию и передаем нажатый элемент.\r\n\t\t\t}\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t});\r\n}\r\n\r\n//=====================Отправка данных AJAX================================\r\n\r\nasync function getMoreQuestions(targetElem) {\r\n\tconst response = await fetch('data/faq.html'); //Находим файл на сервере с нужными данными\r\n\tif (response.ok) {\r\n\t\tconst text = await response.text(); //полученые данные из файла добавляем в константу\r\n\t\tconst helpItems = document.querySelector('.help__items'); //Находим нужный блок, куда планируем вставлять данные\r\n\t\thelpItems.insertAdjacentHTML('beforeend', text); //Вставляем в нужный нам блок данные из файла\r\n\t\ttargetElem.classList.remove('_loading'); //убираем класс\r\n\t} else {\r\n\t\talert('Что-то пошло не так...');\r\n\t}\r\n}\r\n//=====================Определяем есть ли на странице \"бар\" товара и добавляем соответсвующий класс футеру ================================\r\nlet productBar = document.querySelector('.footer__product-bar');\r\nif (productBar) {\r\n\tdocument.querySelector('.footer').classList.add('_bar-true');\r\n}\r\n\r\n//=====================Add to favorites================================\r\nlet favourites = document.querySelectorAll('._favourites');\r\nif (favourites.length > 0) {\r\n\tfavourites.forEach(favouriteCurrent => {\r\n\t\tfavouriteCurrent.addEventListener(\"click\", function (e) {\r\n\t\t\tfavouriteCurrent.classList.toggle('_active');\r\n\t\t});\r\n\t});\r\n}\r\n//=====================Choose color scheme for product================================\r\nlet colorSchemes = document.querySelectorAll('.color-scheme-product');\r\n\r\nif (colorSchemes.length > 0) {\r\n\tcolorSchemes.forEach(colorScheme => {\r\n\t\tif (colorScheme.closest('.product__colors')) {\r\n\t\t\tcolorScheme.addEventListener(\"click\", function (e) {\r\n\t\t\t\tlet parentBlock = colorScheme.closest('.product__colors');\r\n\t\t\t\tlet colorSchemesActive = parentBlock.querySelectorAll('.color-scheme-product');\r\n\t\t\t\t_removeClasses(colorSchemesActive, '_active');\r\n\t\t\t\tcolorScheme.classList.add('_active');\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n}\r\n\r\n//=====================Header nav tabs================================\r\n\r\nlet tabLinks = document.querySelectorAll('._tab-link');\r\nlet tabsContent = document.querySelectorAll('._tab-content');\r\nlet sidebar = document.querySelector('.sidebar');\r\n\r\nif (tabLinks.length > 0 && !isMobile.any()) {\r\n\ttabLinks.forEach(tabLink => {\r\n\t\ttabLink.addEventListener(\"click\", function (e) {\r\n\r\n\t\t\tlet tabId = tabLink.getAttribute('data-id');\r\n\t\t\tlet tabContent = document.querySelector('._tab-content[data-id=\"' + tabId + '\"]');\r\n\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tif (!tabLink.classList.contains('_active')) {\r\n\t\t\t\t_removeClasses(tabLinks, '_active');\r\n\t\t\t\t_removeClasses(tabsContent, '_active');\r\n\r\n\t\t\t\ttabLink.classList.add('_active');\r\n\r\n\t\t\t\tif (tabContent) {\r\n\t\t\t\t\ttabContent.classList.add('_active');\r\n\t\t\t\t}\r\n\t\t\t\tif (tabLink.classList.contains('_first')) {\r\n\t\t\t\t\tdocument.querySelector('.sidebar__item').classList.add('_active');\r\n\t\t\t\t\tdocument.querySelector('.sidebar__content').classList.add('_active');\r\n\t\t\t\t\tsidebar.classList.add('_lock');\r\n\t\t\t\t}\r\n\t\t\t\tif (tabLink.classList.contains('menu__link') && !tabLink.classList.contains('_first')) {\r\n\t\t\t\t\tsidebar.classList.remove('_lock');\r\n\t\t\t\t}\r\n\t\t\t\t// body_lock();\r\n\r\n\t\t\t} else {\r\n\t\t\t\ttabLink.classList.remove('_active');\r\n\t\t\t\tif (tabContent) {\r\n\t\t\t\t\ttabContent.classList.remove('_active');\r\n\t\t\t\t}\r\n\t\t\t\tif (tabLink.classList.contains('_first')) {\r\n\t\t\t\t\tdocument.querySelector('.sidebar__item').classList.remove('_active');\r\n\t\t\t\t\tdocument.querySelector('.sidebar__content').classList.remove('_active');\r\n\t\t\t\t\tsidebar.classList.remove('_lock');\r\n\t\t\t\t}\r\n\t\t\t\t// body_lock_remove();\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n}\r\n\r\n//=====================Show UserBar Info================================\r\n\r\nlet userbarItems = document.querySelectorAll('.user-bar__item');\r\n\r\nuserbarItems.forEach(userbarItem => {\r\n\tlet itemId = userbarItem.getAttribute('data-id');\r\n\tlet activePopup = document.querySelector('.user-bar__popup[data-id=\"' + itemId + '\"]');\r\n\r\n\tuserbarItem.addEventListener(\"mouseenter\", function (e) {\r\n\t\tif (activePopup) {\r\n\t\t\thideAllUserbarPopups();\r\n\t\t\tgetUserBarInfo(activePopup);\r\n\r\n\t\t\tactivePopup.classList.add('_active');\r\n\t\t\tactivePopup.classList.add('_show');\r\n\r\n\t\t\tactivePopup.addEventListener(\"mouseenter\", function (e) {\r\n\t\t\t\tactivePopup.classList.remove('_show');\r\n\t\t\t})\r\n\r\n\t\t\tactivePopup.addEventListener(\"mouseleave\", function (e) {\r\n\t\t\t\tlet itemsWrapper = activePopup.querySelector('.mini-cart__items');\r\n\t\t\t\tlet emptyMessage = activePopup.querySelector('.mini-cart__empty');\r\n\t\t\t\tactivePopup.classList.remove('_active');\r\n\t\t\t\titemsWrapper.classList.remove('_active');\r\n\t\t\t\temptyMessage.classList.remove('_active');\r\n\r\n\t\t\t});\r\n\r\n\t\t\tuserbarItem.addEventListener(\"mouseleave\", function (e) {\r\n\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\tif (!activePopup.classList.contains('_show')) {\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlet itemsWrapper = activePopup.querySelector('.mini-cart__items');\r\n\t\t\t\t\t\tlet emptyMessage = activePopup.querySelector('.mini-cart__empty');\r\n\t\t\t\t\t\tactivePopup.classList.remove('_active');\r\n\t\t\t\t\t\titemsWrapper.classList.remove('_active');\r\n\t\t\t\t\t\temptyMessage.classList.remove('_active');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}, 500);\r\n\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n});\r\n\r\nfunction hideAllUserbarPopups(params) {\r\n\tlet userbarPopups = document.querySelectorAll('.user-bar__popup');\r\n\r\n\tuserbarPopups.forEach(userbarPopup => {\r\n\t\tlet itemsWrapper = userbarPopup.querySelector('.mini-cart__items');\r\n\t\tlet emptyMessage = userbarPopup.querySelector('.mini-cart__empty');\r\n\t\tuserbarPopup.classList.remove('_active');\r\n\t\titemsWrapper.classList.remove('_active');\r\n\t\temptyMessage.classList.remove('_active');\r\n\t});\r\n}\r\n\r\nfunction getUserBarInfo(activePopup) {\r\n\tlet itemsToShow = activePopup.querySelectorAll('.mini-cart__item');\r\n\tlet itemsLenght = itemsToShow.length;\r\n\r\n\tif (itemsLenght > 0) {\r\n\t\tlet itemsWrapper = activePopup.querySelector('.mini-cart__items');\r\n\t\titemsWrapper.classList.add('_active');\r\n\t} else {\r\n\t\tlet emptyMessage = activePopup.querySelector('.mini-cart__empty');\r\n\t\temptyMessage.classList.add('_active');\r\n\t}\r\n}\r\n\r\nlet searchInput = document.querySelector('.user-bar__input');\r\nlet headerMenu = document.querySelector('.main-header__menu');\r\nlet searchBlock = document.querySelector('.user-bar__item_search');\r\nlet searchIcon = document.querySelector('.user-bar__icon svg');\r\nlet clearInputIcon = document.querySelector('.user-bar__clear-input-btn');\r\nlet searchHideIcon = document.querySelector('.user-bar__hide-search');\r\nlet searchList = document.querySelector('.user-bar__search-list');\r\n\r\nsearchBlock.addEventListener(\"click\", function (e) {\r\n\tif (e.target.contains(searchIcon)) {\r\n\t\tsearchInput.classList.add('_active');\r\n\t\theaderMenu.classList.add('hidden');\r\n\t\tsearchBlock.classList.add('_active');\r\n\t}\r\n\tif (e.target.contains(clearInputIcon)) {\r\n\t\tsearchInput.value = \"\";\r\n\t}\r\n\r\n\tsearchInput.addEventListener('input', function (e) {\r\n\t\tsearchList.classList.add('_show');\r\n\t});\r\n\r\n\tif (e.target.contains(searchHideIcon)) {\r\n\t\tsearchInput.classList.remove('_active');\r\n\t\theaderMenu.classList.remove('hidden');\r\n\t\tsearchBlock.classList.remove('_active');\r\n\t\tsearchList.classList.remove('_show');\r\n\t}\r\n\t\r\n\r\n\tif (isMobile.any()) {\r\n\t\tsearchInput.addEventListener('blur', function (e) {\r\n\t\t\tsearchInput.classList.remove('_active');\r\n\t\t\theaderMenu.classList.remove('hidden');\r\n\t\t\tsearchBlock.classList.remove('_active');\r\n\t\t\tsearchList.classList.remove('_show');\r\n\t\t\tsearchInput.value = \"\";\r\n\t\t});\r\n\t\t}\r\n}); \r\n\r\n\r\n//=====================================================\r\n//Скрипт находит карточки категорий и вычесляет описание большого размера, которые могут поломать верстку и установливает для них высоту. \r\n\r\nlet hoverTexts =document.querySelectorAll('.category__text-hover p');\r\n\r\n\r\nhoverTexts.forEach(hoverTextActive => {\r\n\tlet currentHeight = hoverTextActive.offsetHeight;\r\n\r\n\tif (currentHeight > 90 && currentHeight < 130) {\r\n\t\thoverTextActive.parentNode.classList.add('_medium');\r\n\t}\r\n\r\n\tif (currentHeight > 145) {\r\n\t\thoverTextActive.parentNode.classList.add('_large');\r\n\t}\r\n});\r\n\r\n//=====================Выбираем размер рамы продукта================================\r\nlet sizeItems =document.querySelectorAll('.size-picking__item');\r\n\r\nif (sizeItems.length > 0) {\r\n\tsizeItems.forEach(sizeItem => {\r\n\t\tsizeItem.addEventListener(\"click\", function(e) {\r\n\t\t\t\t_removeClasses(sizeItems, '_active');\r\n\t\t\t\tsizeItem.classList.add('_active');\r\n\t\t});\r\n\t});\r\n}\r\n//=====================================================\r\nif (isMobile.any()) {\r\n\t\r\n\tlet mobSlider = document.querySelector('.mob-slider__content');\r\n\tlet mobSlides = document.querySelectorAll('.mob-slider__slide');\r\n\tlet sections = document.querySelectorAll('section[data-index]');\r\n\tlet mobSlidesLenght = mobSlides.length;\r\n\tif (mobSlider) {\r\n\t\tif (mobSlidesLenght > 0) {\r\n\t\t\tfor (let index = 0; index < mobSlides.length; index++) {\r\n\t\t\t\tconst mobSlide = mobSlides[index];\r\n\t\t\t\tmobSlide.addEventListener(\"click\", function(e) {\r\n\t\t\t\t\tlet i = mobSlide.getAttribute('data-index');\r\n\t\t\t\t\tlet data = 'section[data-index=\"' + i + '\"]';\r\n\t\t\t\t\tlet activeSections = document.querySelectorAll(data);\r\n\r\n\r\n\t\t\t\t\t_removeClasses(mobSlides, '_active');\r\n\t\t\t\t\t_removeClasses(sections, '_active');\r\n\t\t\t\t\tif (index == 2) {\r\n\t\t\t\t\t\tmobSlider.classList.add('_active');\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\t\tif (mobSlider.classList.contains('_active')) {\r\n\t\t\t\t\t\t\tmobSlider.classList.remove('_active');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmobSlide.classList.add('_active');\r\n\t\t\t\t\tactiveSections.forEach(element => {\r\n\t\t\t\t\t\telement.classList.add('_active');\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n//=====================================================\r\nlet buttonAddCart = document.querySelector('.product-bar__btn_add-cart');\r\nlet buttonGoCart = document.querySelector('.product-bar__btn_go-cart');\r\n\r\nif (buttonAddCart) {\r\n\tbuttonAddCart.addEventListener(\"click\", function(e) {\r\n\t\tbuttonAddCart.classList.add('_hide');\r\n\t\tbuttonGoCart.classList.add('_active');\r\n\t});\r\n}\r\n\r\n//=====================clear input on Bank page================================\r\nlet bankInput = document.querySelector('.town-search__input');\r\nlet bankIconClose = document.querySelector('.town-search__icon_close');\r\nlet bankSearchList = document.querySelector('.town-search__info');\r\n\r\nif (bankIconClose) {\r\n\tbankIconClose.addEventListener(\"click\", function(e) {\r\n\t\tif (bankInput) {\r\n\t\t\tbankInput.value = \"\";\r\n\t\t\tif (bankSearchList) {\r\n\t\t\t\tbankSearchList.classList.remove('_show');\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}\r\nif (bankInput) {\r\n\tbankInput.addEventListener('input', function (e) {\r\n\t\tif (bankSearchList) {\r\n\t\t\tbankSearchList.classList.add('_show');\r\n\t\t}\r\n\t});\r\n}\r\n\r\n//=====================================================\r\n\r\nlet products =document.querySelectorAll('.catalogue__items .product');\r\n\r\nproducts.forEach(e => {\r\n\tlet hoverText = e.querySelector('.text-hover-product')\r\n\tlet productImage = e.querySelector('.product__image-wrapper');\r\n\r\n\tif (hoverText && !isMobile.any()) {\r\n\t\tlet productMainHeight = e.offsetHeight;\r\n\t\tlet hoverHeight = hoverText.offsetHeight;\r\n\t\tlet currentHeieght = productMainHeight - hoverHeight;\r\n\t\tconsole.log(currentHeieght);\r\n\t\thoverText.classList.add('_hide');\r\n\t\te.style.height = currentHeieght + \"px\";\r\n\t\te.addEventListener(\"mouseenter\", function (e) {\r\n\t\t\tproductImage.classList.add('_hide-image');\r\n\t\t\t_slideDown(hoverText);\r\n\t\t});\r\n\t\te.addEventListener(\"mouseleave\", function (e) {\r\n\t\t\tconsole.log('test');\r\n\t\t\tproductImage.classList.remove('_hide-image');\r\n\t\t\t_slideUp(hoverText);\r\n\t\t});\r\n\t}\r\n});\r\n\r\n\r\n//=====================Choose color scheme for product================================\r\nlet productSizes = document.querySelectorAll('.text-hover-product__size');\r\n\r\nif (productSizes.length > 0) {\r\n\tproductSizes.forEach(productSize => {\r\n\t\tif (productSize.closest('.text-hover-product__sizes')) {\r\n\t\t\tproductSize.addEventListener(\"click\", function (e) {\r\n\t\t\t\tlet parentBlock = productSize.closest('.text-hover-product__sizes');\r\n\t\t\t\tlet productSizesActive = parentBlock.querySelectorAll('.text-hover-product__size');\r\n\t\t\t\t_removeClasses(productSizesActive, '_active');\r\n\t\t\t\tproductSize.classList.add('_active');\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n}\r\n//=====================Order page. Add active class for choosed item================================\r\nlet orderPage = document.querySelector('.order');\r\nif (orderPage) {\r\n\tlet orderBlock = document.querySelectorAll('.delivery-order__items');\r\n\tlet btnAddSelfCompany = document.querySelector('.item-delivery__info_by-self');\r\n\tlet inputAddSelfCompany = document.querySelector('.delivery-order__self-company');\r\n\r\n\tlet inputIsShowed = false;\r\n\r\n\r\n\torderBlock.forEach(element => {\r\n\t\telement.addEventListener('click', event => {\r\n\t\t\tlet orderItem = event.target.closest('.item-delivery');\r\n\t\t\tlet addComapnyBtn = event.target.closest('.item-delivery__info_by-self');\r\n\r\n\t\t\tif (inputIsShowed) {\r\n\t\t\t\t_slideUp(inputAddSelfCompany);\r\n\t\t\t\tinputIsShowed = false;\r\n\t\t\t}\r\n\t\t\tif (addComapnyBtn) {\r\n\t\t\t\t_slideDown(inputAddSelfCompany);\r\n\t\t\t\tinputIsShowed = true;\r\n\t\t\t}\r\n\t\t\tif (!orderItem) return;\r\n\t\t\tif (!element.contains(orderItem)) return;\r\n\t\t\tif(orderItem.classList.contains('_inactive')) return;\r\n\t\t\t\r\n\t\t\tlet curentOrderBlock = orderItem.closest('.delivery-order__items');\r\n\t\t\tlet currentOrderItems = curentOrderBlock.querySelectorAll('.item-delivery');\r\n\t\t\t_removeClasses(currentOrderItems, '_active');\r\n\r\n\t\t\torderItem.classList.add('_active');\r\n\t\t  });\r\n\t\t  \r\n\t});\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n//let btn = document.querySelectorAll('button[type=\"submit\"],input[type=\"submit\"]');\r\nlet forms = document.querySelectorAll('form');\r\nif (forms.length > 0) {\r\n\tfor (let index = 0; index < forms.length; index++) {\r\n\t\tconst el = forms[index];\r\n\t\tel.addEventListener('submit', form_submit);\r\n\t}\r\n}\r\nasync function form_submit(e) {\r\n\tlet btn = e.target;\r\n\tlet form = btn.closest('form');\r\n\tlet error = form_validate(form);\r\n\tif (error == 0) {\r\n\t\tlet formAction = form.getAttribute('action') ? form.getAttribute('action').trim() : '#';\r\n\t\tlet formMethod = form.getAttribute('method') ? form.getAttribute('method').trim() : 'GET';\r\n\t\tconst message = form.getAttribute('data-message');\r\n\t\tconst ajax = form.getAttribute('data-ajax');\r\n\t\tconst test = form.getAttribute('data-test');\r\n\r\n\t\t//SendForm\r\n\t\tif (ajax) {\r\n\t\t\te.preventDefault();\r\n\t\t\tlet formData = new FormData(form);\r\n\t\t\tform.classList.add('_sending');\r\n\t\t\tlet response = await fetch(formAction, {\r\n\t\t\t\tmethod: formMethod,\r\n\t\t\t\tbody: formData\r\n\t\t\t});\r\n\t\t\tif (response.ok) {\r\n\t\t\t\tlet result = await response.json();\r\n\t\t\t\tform.classList.remove('_sending');\r\n\t\t\t\tif (message) {\r\n\t\t\t\t\tpopup_open(message + '-message');\r\n\t\t\t\t}\r\n\t\t\t\tform_clean(form);\r\n\t\t\t} else {\r\n\t\t\t\talert(\"Ошибка\");\r\n\t\t\t\tform.classList.remove('_sending');\r\n\t\t\t}\r\n\t\t}\r\n\t\t// If test\r\n\t\tif (test) {\r\n\t\t\te.preventDefault();\r\n\t\t\tpopup_open(message + '-message');\r\n\t\t\tform_clean(form);\r\n\t\t}\r\n\t} else {\r\n\t\tlet form_error = form.querySelectorAll('._error');\r\n\t\tif (form_error && form.classList.contains('_goto-error')) {\r\n\t\t\t_goto(form_error[0], 1000, 50);\r\n\t\t}\r\n\t\te.preventDefault();\r\n\t}\r\n}\r\n\r\nfunction form_validate(form) {\r\n\tlet error = 0;\r\n\tlet form_req = form.querySelectorAll('._req');\r\n\tif (form_req.length > 0) {\r\n\t\tfor (let index = 0; index < form_req.length; index++) {\r\n\t\t\tconst el = form_req[index];\r\n\t\t\tif (!_is_hidden(el)) {\r\n\t\t\t\terror += form_validate_input(el);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn error;\r\n}\r\n\r\nfunction form_validate_input(input) {\r\n\tlet error = 0;\r\n\tlet input_g_value = input.getAttribute('data-value');\r\n\r\n\r\n\tif (input.getAttribute(\"name\") == \"email\" || input.classList.contains(\"_email\")) {\r\n\t\tif (input.value != input_g_value) {\r\n\t\t\tlet em = input.value.replace(\" \", \"\");\r\n\t\t\tinput.value = em;\r\n\t\t}\r\n\t\tif (email_test(input) || input.value == input_g_value) {\r\n\t\t\tform_add_error(input);\r\n\t\t\terror++;\r\n\t\t} else {\r\n\t\t\tform_remove_error(input);\r\n\t\t}\r\n\t} else if (input.getAttribute(\"type\") == \"checkbox\" && input.checked == false) {\r\n\t\tform_add_error(input);\r\n\t\terror++;\r\n\t} else if (input.getAttribute(\"type\") == \"radio\") {\r\n\t\tlet a = input.getAttribute('name');\r\n\t\tlet parentRadio = input.parentElement;\r\n\t\tlet allRadioButtons = parentRadio.querySelectorAll('input[name=\"' + a + '\"]');\r\n\t\tvar radioGroupO = Array.from(allRadioButtons);\r\n\r\n\t\tfunction isCheked(i) {\r\n\t\t\treturn i.checked == true;\r\n\t\t}\r\n\r\n\t\tif (radioGroupO.some(isCheked) == false) {\r\n\t\t\tform_add_error(parentRadio);\r\n\t\t\tremoveRadioError(parentRadio, allRadioButtons);\r\n\t\t\terror++;\r\n\t\t}\r\n\t} else {\r\n\t\tif (input.value == '' || input.value == input_g_value) {\r\n\t\t\tform_add_error(input);\r\n\t\t\terror++;\r\n\t\t} else {\r\n\t\t\tform_remove_error(input);\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn error;\r\n}\r\nfunction removeRadioError (parentRadio, allRadioButtons) {\r\n\tallRadioButtons.forEach(element => {\r\n\t\telement.addEventListener(\"change\", function(event) {\r\n\t\t\tif (parentRadio.classList.contains('_error')) {\r\n\t\t\t\tform_remove_error(parentRadio);\r\n\t\t\t}\r\n\t\t})\r\n\t});\r\n}\r\n\r\nfunction form_add_error(input) {\r\n\tinput.classList.add('_error');\r\n\tinput.parentElement.classList.add('_error');\r\n\r\n\tlet input_error = input.parentElement.querySelector('.form__error');\r\n\tif (input_error) {\r\n\t\tinput.parentElement.removeChild(input_error);\r\n\t}\r\n\tlet input_error_text = input.getAttribute('data-error');\r\n\tif (input_error_text && input_error_text != '') {\r\n\t\tinput.parentElement.insertAdjacentHTML('beforeend', '<div class=\"form__error\">' + input_error_text + '</div>');\r\n\t}\r\n}\r\n\r\nfunction form_remove_error(input) {\r\n\tconsole.log('remove');\r\n\tconsole.log(input);\r\n\tinput.classList.remove('_error');\r\n\tinput.parentElement.classList.remove('_error');\r\n\r\n\tlet input_error = input.parentElement.querySelector('.form__error');\r\n\tif (input_error) {\r\n\t\tinput.parentElement.removeChild(input_error);\r\n\t}\r\n}\r\n\r\nfunction form_clean(form) {\r\n\tlet inputs = form.querySelectorAll('input,textarea');\r\n\tfor (let index = 0; index < inputs.length; index++) {\r\n\t\tconst el = inputs[index];\r\n\t\tel.parentElement.classList.remove('_focus');\r\n\t\tel.classList.remove('_focus');\r\n\t\tel.value = el.getAttribute('data-value');\r\n\t}\r\n\tlet checkboxes = form.querySelectorAll('.checkbox__input');\r\n\tif (checkboxes.length > 0) {\r\n\t\tfor (let index = 0; index < checkboxes.length; index++) {\r\n\t\t\tconst checkbox = checkboxes[index];\r\n\t\t\tcheckbox.checked = false;\r\n\t\t}\r\n\t}\r\n\tlet selects = form.querySelectorAll('select');\r\n\tif (selects.length > 0) {\r\n\t\tfor (let index = 0; index < selects.length; index++) {\r\n\t\t\tconst select = selects[index];\r\n\t\t\tconst select_default_value = select.getAttribute('data-default');\r\n\t\t\tselect.value = select_default_value;\r\n\t\t\tselect_item(select);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nlet viewPass = document.querySelectorAll('.form__viewpass');\r\nfor (let index = 0; index < viewPass.length; index++) {\r\n\tconst element = viewPass[index];\r\n\telement.addEventListener(\"click\", function (e) {\r\n\t\tif (element.classList.contains('_active')) {\r\n\t\t\telement.parentElement.querySelector('input').setAttribute(\"type\", \"password\");\r\n\t\t} else {\r\n\t\t\telement.parentElement.querySelector('input').setAttribute(\"type\", \"text\");\r\n\t\t}\r\n\t\telement.classList.toggle('_active');\r\n\t});\r\n}\r\n\r\n//Select\r\nlet selects = document.getElementsByTagName('select');\r\nif (selects.length > 0) {\r\n\tselects_init();\r\n}\r\n\r\nfunction selects_init() {\r\n\tfor (let index = 0; index < selects.length; index++) {\r\n\t\tconst select = selects[index];\r\n\t\tselect_init(select);\r\n\t}\r\n\t//select_callback();\r\n\tdocument.addEventListener('click', function (e) {\r\n\t\tselects_close(e);\r\n\t});\r\n\tdocument.addEventListener('keydown', function (e) {\r\n\t\tif (e.code === 'Escape') {\r\n\t\t\tselects_close(e);\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction selects_close(e) {\r\n\tconst selects = document.querySelectorAll('.select');\r\n\tif (!e.target.closest('.select') && !e.target.classList.contains('_option')) {\r\n\t\tfor (let index = 0; index < selects.length; index++) {\r\n\t\t\tconst select = selects[index];\r\n\t\t\tconst select_body_options = select.querySelector('.select__options');\r\n\t\t\tselect.classList.remove('_active');\r\n\t\t\t_slideUp(select_body_options, 100);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction select_init(select) {\r\n\tconst select_parent = select.parentElement;\r\n\tconst select_modifikator = select.getAttribute('class');\r\n\tconst select_selected_option = select.querySelector('option:checked');\r\n\tselect.setAttribute('data-default', select_selected_option.value);\r\n\tselect.style.display = 'none';\r\n\r\n\tselect_parent.insertAdjacentHTML('beforeend', '<div class=\"select select_' + select_modifikator + '\"></div>');\r\n\r\n\tlet new_select = select.parentElement.querySelector('.select');\r\n\tnew_select.appendChild(select);\r\n\tselect_item(select);\r\n}\r\n\r\nfunction select_item(select) {\r\n\tconst select_parent = select.parentElement;\r\n\tconst select_items = select_parent.querySelector('.select__item');\r\n\tconst select_options = select.querySelectorAll('option');\r\n\tconst select_selected_option = select.querySelector('option:checked');\r\n\tconst select_selected_text = select_selected_option.text;\r\n\tconst select_type = select.getAttribute('data-type');\r\n\r\n\tif (select_items) {\r\n\t\tselect_items.remove();\r\n\t}\r\n\r\n\tlet select_type_content = '';\r\n\tif (select_type == 'input') {\r\n\t\tselect_type_content = '<div class=\"select__value icon-select-arrow\"><input autocomplete=\"off\" type=\"text\" name=\"form[]\" value=\"' + select_selected_text + '\" data-error=\"Ошибка\" data-value=\"' + select_selected_text + '\" class=\"select__input\"></div>';\r\n\t} else {\r\n\t\tselect_type_content = '<div class=\"select__value icon-select-arrow\"><span>' + select_selected_text + '</span></div>';\r\n\t}\r\n\r\n\tselect_parent.insertAdjacentHTML('beforeend',\r\n\t\t'<div class=\"select__item\">' +\r\n\t\t'<div class=\"select__title\">' + select_type_content + '</div>' +\r\n\t\t'<div class=\"select__options\">' + select_get_options(select_options) + '</div>' +\r\n\t\t'</div></div>');\r\n\r\n\tselect_actions(select, select_parent);\r\n}\r\n\r\nfunction select_actions(original, select) {\r\n\tconst select_item = select.querySelector('.select__item');\r\n\tconst selectTitle = select.querySelector('.select__title');\r\n\tconst select_body_options = select.querySelector('.select__options');\r\n\tconst select_options = select.querySelectorAll('.select__option');\r\n\tconst select_type = original.getAttribute('data-type');\r\n\tconst select_input = select.querySelector('.select__input');\r\n\r\n\tselectTitle.addEventListener('click', function (e) {\r\n\t\tselectItemActions();\r\n\t});\r\n\r\n\tfunction selectMultiItems() {\r\n\t\tlet selectedOptions = select.querySelectorAll('.select__option');\r\n\t\tlet originalOptions = original.querySelectorAll('option');\r\n\t\tlet selectedOptionsText = [];\r\n\t\tfor (let index = 0; index < selectedOptions.length; index++) {\r\n\t\t\tconst selectedOption = selectedOptions[index];\r\n\t\t\toriginalOptions[index].removeAttribute('selected');\r\n\t\t\tif (selectedOption.classList.contains('_selected')) {\r\n\t\t\t\tconst selectOptionText = selectedOption.innerHTML;\r\n\t\t\t\tselectedOptionsText.push(selectOptionText);\r\n\t\t\t\toriginalOptions[index].setAttribute('selected', 'selected');\r\n\t\t\t}\r\n\t\t}\r\n\t\tselect.querySelector('.select__value').innerHTML = '<span>' + selectedOptionsText + '</span>';\r\n\t}\r\n\r\n\tfunction selectItemActions(type) {\r\n\t\tif (!type) {\r\n\t\t\tlet selects = document.querySelectorAll('.select');\r\n\t\t\tfor (let index = 0; index < selects.length; index++) {\r\n\t\t\t\tconst select = selects[index];\r\n\t\t\t\tconst select_body_options = select.querySelector('.select__options');\r\n\t\t\t\tif (select != select_item.closest('.select')) {\r\n\t\t\t\t\tselect.classList.remove('_active');\r\n\t\t\t\t\t_slideUp(select_body_options, 100);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t_slideToggle(select_body_options, 100);\r\n\t\t\tselect.classList.toggle('_active');\r\n\t\t}\r\n\t}\r\n\tfor (let index = 0; index < select_options.length; index++) {\r\n\t\tconst select_option = select_options[index];\r\n\t\tconst select_option_value = select_option.getAttribute('data-value');\r\n\t\tconst select_option_text = select_option.innerHTML;\r\n\r\n\t\tif (select_type == 'input') {\r\n\t\t\tselect_input.addEventListener('keyup', select_search);\r\n\t\t} else {\r\n\t\t\tif (select_option.getAttribute('data-value') == original.value && !original.hasAttribute('multiple')) {\r\n\t\t\t\tselect_option.style.display = 'none';\r\n\t\t\t}\r\n\t\t}\r\n\t\tselect_option.addEventListener('click', function () {\r\n\t\t\tfor (let index = 0; index < select_options.length; index++) {\r\n\t\t\t\tconst el = select_options[index];\r\n\t\t\t\tel.style.display = 'block';\r\n\t\t\t}\r\n\t\t\tif (select_type == 'input') {\r\n\t\t\t\tselect_input.value = select_option_text;\r\n\t\t\t\toriginal.value = select_option_value;\r\n\t\t\t} else {\r\n\t\t\t\tif (original.hasAttribute('multiple')) {\r\n\t\t\t\t\tselect_option.classList.toggle('_selected');\r\n\t\t\t\t\tselectMultiItems();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tselect.querySelector('.select__value').innerHTML = '<span>' + select_option_text + '</span>';\r\n\t\t\t\t\toriginal.value = select_option_value;\r\n\t\t\t\t\tselect_option.style.display = 'none';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet type;\r\n\t\t\tif (original.hasAttribute('multiple')) {\r\n\t\t\t\ttype = 'multiple';\r\n\t\t\t}\r\n\t\t\tselectItemActions(type);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction select_get_options(select_options) {\r\n\tif (select_options) {\r\n\t\tlet select_options_content = '';\r\n\t\tfor (let index = 0; index < select_options.length; index++) {\r\n\t\t\tconst select_option = select_options[index];\r\n\t\t\tconst select_option_value = select_option.value;\r\n\t\t\tif (select_option_value != '') {\r\n\t\t\t\tconst select_option_text = select_option.innerHTML;\r\n\t\t\t\tselect_options_content = select_options_content + '<div data-value=\"' + select_option_value + '\" class=\"select__option\">' + select_option_text + '</div>';\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn select_options_content;\r\n\t}\r\n}\r\n\r\nfunction select_search(e) {\r\n\tlet select_block = e.target.closest('.select ').querySelector('.select__options');\r\n\tlet select_options = e.target.closest('.select ').querySelectorAll('.select__option');\r\n\tlet select_search_text = e.target.value.toUpperCase();\r\n\r\n\tfor (let i = 0; i < select_options.length; i++) {\r\n\t\tlet select_option = select_options[i];\r\n\t\tlet select_txt_value = select_option.textContent || select_option.innerText;\r\n\t\tif (select_txt_value.toUpperCase().indexOf(select_search_text) > -1) {\r\n\t\t\tselect_option.style.display = \"\";\r\n\t\t} else {\r\n\t\t\tselect_option.style.display = \"none\";\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction selects_update_all() {\r\n\tlet selects = document.querySelectorAll('select');\r\n\tif (selects) {\r\n\t\tfor (let index = 0; index < selects.length; index++) {\r\n\t\t\tconst select = selects[index];\r\n\t\t\tselect_item(select);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n//Placeholers\r\nlet inputs = document.querySelectorAll('input[data-value],textarea[data-value]');\r\ninputs_init(inputs);\r\n\r\nfunction inputs_init(inputs) {\r\n\tif (inputs.length > 0) {\r\n\t\tfor (let index = 0; index < inputs.length; index++) {\r\n\t\t\tconst input = inputs[index];\r\n\t\t\tconst input_g_value = input.getAttribute('data-value');\r\n\t\t\tinput_placeholder_add(input);\r\n\t\t\tif (input.value != '' && input.value != input_g_value) {\r\n\t\t\t\tinput_focus_add(input);\r\n\t\t\t}\r\n\t\t\tinput.addEventListener('focus', function (e) {\r\n\t\t\t\tif (input.value == input_g_value) {\r\n\t\t\t\t\tinput_focus_add(input);\r\n\t\t\t\t\tinput.value = '';\r\n\t\t\t\t}\r\n\t\t\t\tif (input.getAttribute('data-type') === \"pass\" && !input.parentElement.querySelector('.form__viewpass').classList.contains('_active')) {\r\n\t\t\t\t\tinput.setAttribute('type', 'password');\r\n\t\t\t\t}\r\n\t\t\t\tif (input.classList.contains('_date')) {\r\n\t\t\t\t\t/*\r\n\t\t\t\t\tinput.classList.add('_mask');\r\n\t\t\t\t\tInputmask(\"99.99.9999\", {\r\n\t\t\t\t\t\t//\"placeholder\": '',\r\n\t\t\t\t\t\tclearIncomplete: true,\r\n\t\t\t\t\t\tclearMaskOnLostFocus: true,\r\n\t\t\t\t\t\tonincomplete: function () {\r\n\t\t\t\t\t\t\tinput_clear_mask(input, input_g_value);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).mask(input);\r\n\t\t\t\t\t*/\r\n\t\t\t\t}\r\n\t\t\t\tif (input.classList.contains('_phone')) {\r\n\t\t\t\t\t//'+7(999) 999 9999'\r\n\t\t\t\t\t//'+38(999) 999 9999'\r\n\t\t\t\t\t//'+375(99)999-99-99'\r\n\t\t\t\t\tinput.classList.add('_mask');\r\n\t\t\t\t\tInputmask(\"+375 (99) 9999999\", {\r\n\t\t\t\t\t\t//\"placeholder\": '',\r\n\t\t\t\t\t\tclearIncomplete: true,\r\n\t\t\t\t\t\tclearMaskOnLostFocus: true,\r\n\t\t\t\t\t\tonincomplete: function () {\r\n\t\t\t\t\t\t\tinput_clear_mask(input, input_g_value);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).mask(input);\r\n\t\t\t\t}\r\n\t\t\t\tif (input.classList.contains('_digital')) {\r\n\t\t\t\t\tinput.classList.add('_mask');\r\n\t\t\t\t\tInputmask(\"9{1,}\", {\r\n\t\t\t\t\t\t\"placeholder\": '',\r\n\t\t\t\t\t\tclearIncomplete: true,\r\n\t\t\t\t\t\tclearMaskOnLostFocus: true,\r\n\t\t\t\t\t\tonincomplete: function () {\r\n\t\t\t\t\t\t\tinput_clear_mask(input, input_g_value);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).mask(input);\r\n\t\t\t\t}\r\n\t\t\t\tform_remove_error(input);\r\n\t\t\t});\r\n\t\t\tinput.addEventListener('blur', function (e) {\r\n\t\t\t\tif (input.value == '') {\r\n\t\t\t\t\tinput.value = input_g_value;\r\n\t\t\t\t\tinput_focus_remove(input);\r\n\t\t\t\t\tif (input.classList.contains('_mask')) {\r\n\t\t\t\t\t\tinput_clear_mask(input, input_g_value);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (input.getAttribute('data-type') === \"pass\") {\r\n\t\t\t\t\t\tinput.setAttribute('type', 'text');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (input.classList.contains('_date')) {\r\n\t\t\t\tconst calendarItem = datepicker(input, {\r\n\t\t\t\t\tcustomDays: [\"Пн\", \"Вт\", \"Ср\", \"Чт\", \"Пт\", \"Сб\", \"Вс\"],\r\n\t\t\t\t\tcustomMonths: [\"Янв\", \"Фев\", \"Мар\", \"Апр\", \"Май\", \"Июн\", \"Июл\", \"Авг\", \"Сен\", \"Окт\", \"Ноя\", \"Дек\"],\r\n\t\t\t\t\toverlayButton: 'Применить',\r\n\t\t\t\t\toverlayPlaceholder: 'Год (4 цифры)',\r\n\t\t\t\t\tstartDay: 1,\r\n\t\t\t\t\tformatter: (input, date, instance) => {\r\n\t\t\t\t\t\tconst value = date.toLocaleDateString()\r\n\t\t\t\t\t\tinput.value = value\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonSelect: function (input, instance, date) {\r\n\t\t\t\t\t\tinput_focus_add(input.el);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tconst dataFrom = input.getAttribute('data-from');\r\n\t\t\t\tconst dataTo = input.getAttribute('data-to');\r\n\t\t\t\tif (dataFrom) {\r\n\t\t\t\t\tcalendarItem.setMin(new Date(dataFrom));\r\n\t\t\t\t}\r\n\t\t\t\tif (dataTo) {\r\n\t\t\t\t\tcalendarItem.setMax(new Date(dataTo));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction input_placeholder_add(input) {\r\n\tconst input_g_value = input.getAttribute('data-value');\r\n\tif (input.value == '' && input_g_value != '') {\r\n\t\tinput.value = input_g_value;\r\n\t}\r\n}\r\n\r\nfunction input_focus_add(input) {\r\n\tif (!input.classList.contains('user-bar__input') && !input.classList.contains('town-search__input')) {\r\n\t\tinput.classList.add('_focus');\r\n\t\tinput.parentElement.classList.add('_focus');\r\n\t}\r\n\r\n}\r\n\r\nfunction input_focus_remove(input) {\r\n\tif (!input.classList.contains('user-bar__input') && !input.classList.contains('town-search__input')) {\r\n\t\tinput.classList.remove('_focus');\r\n\t\tinput.parentElement.classList.remove('_focus');\r\n\t};\r\n}\r\n\r\nfunction input_clear_mask(input, input_g_value) {\r\n\tinput.inputmask.remove();\r\n\tinput.value = input_g_value;\r\n\tinput_focus_remove(input);\r\n}\r\n\r\n//QUANTITY\r\nlet quantityButtons = document.querySelectorAll('.quantity__button');\r\nif (quantityButtons.length > 0) {\r\n\tfor (let index = 0; index < quantityButtons.length; index++) {\r\n\t\tconst quantityButton = quantityButtons[index];\r\n\t\tquantityButton.addEventListener(\"click\", function (e) {\r\n\t\t\tlet value = parseInt(quantityButton.closest('.quantity').querySelector('input').value);\r\n\t\t\tif (quantityButton.classList.contains('quantity__button_plus')) {\r\n\t\t\t\tvalue++;\r\n\t\t\t} else {\r\n\t\t\t\tvalue = value - 1;\r\n\t\t\t\tif (value < 1) {\r\n\t\t\t\t\tvalue = 1\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tquantityButton.closest('.quantity').querySelector('input').value = value;\r\n\t\t});\r\n\t}\r\n}\r\n\r\n//RANGE\r\nconst priceSlider = document.querySelector('.price-filter__slider');\r\nif (priceSlider) {\r\n\r\n\tlet textFrom = priceSlider.getAttribute('data-from');\r\n\tlet textTo = priceSlider.getAttribute('data-to');\r\n\r\n\tnoUiSlider.create(priceSlider, {\r\n\t\tstart: [0, 200000],\r\n\t\tconnect: true,\r\n\t\ttooltips: [wNumb({\r\n\t\t\tdecimals: 0,\r\n\t\t\tprefix: textFrom + ' '\r\n\t\t}), wNumb({\r\n\t\t\tdecimals: 0,\r\n\t\t\tprefix: textTo + ' '\r\n\t\t})],\r\n\t\trange: {\r\n\t\t\t'min': [0],\r\n\t\t\t'max': [200000]\r\n\t\t}\r\n\t});\r\n\r\n\t/*\r\n\tconst priceStart = document.getElementById('price-start');\r\n\tconst priceEnd = document.getElementById('price-end');\r\n\tpriceStart.addEventListener('change', setPriceValues);\r\n\tpriceEnd.addEventListener('change', setPriceValues);\r\n\t*/\r\n\r\n\tfunction setPriceValues() {\r\n\t\tlet priceStartValue;\r\n\t\tlet priceEndValue;\r\n\t\tif (priceStart.value != '') {\r\n\t\t\tpriceStartValue = priceStart.value;\r\n\t\t}\r\n\t\tif (priceEnd.value != '') {\r\n\t\t\tpriceEndValue = priceEnd.value;\r\n\t\t}\r\n\t\tpriceSlider.noUiSlider.set([priceStartValue, priceEndValue]);\r\n\t}\r\n}\r\nlet scr_body = document.querySelector('body');\r\nlet scr_blocks = document.querySelectorAll('._scr-sector');\r\nlet scr_items = document.querySelectorAll('._scr-item');\r\nlet scr_fix_block = document.querySelectorAll('._side-wrapper');\r\nlet scr_min_height = 750;\r\n\r\nlet scrolling = true;\r\nlet scrolling_full = true;\r\n\r\nlet scrollDirection = 0;\r\n\r\nlet currentScroll;\r\n\r\n//ScrollOnScroll\r\nwindow.addEventListener('scroll', scroll_scroll);\r\nfunction scroll_scroll() {\r\n\tlet src_value = currentScroll = pageYOffset;\r\n\tlet header = document.querySelector('header.header');\r\n\tif (header !== null) {\r\n\t\tif (src_value > 10) {\r\n\t\t\theader.classList.add('_scroll');\r\n\t\t} else {\r\n\t\t\theader.classList.remove('_scroll');\r\n\t\t}\r\n\t}\r\n\tif (scr_blocks.length > 0) {\r\n\t\tfor (let index = 0; index < scr_blocks.length; index++) {\r\n\t\t\tlet block = scr_blocks[index];\r\n\t\t\tlet block_offset = offset(block).top;\r\n\t\t\tlet block_height = block.offsetHeight;\r\n\r\n\t\t\t/*\r\n\t\t\tif ((src_value > block_offset - block_height) && src_value < (block_offset + block_height) && window.innerHeight > scr_min_height && window.innerWidth > 992) {\r\n\t\t\t\tlet scrProcent = (src_value - block_offset) / block_height * 100;\r\n\t\t\t\tscrParallax(block, scrProcent, block_height);\r\n\t\t\t}\r\n\t\t\t*/\r\n\r\n\t\t\tif ((pageYOffset > block_offset - window.innerHeight / 1.5) && pageYOffset < (block_offset + block_height) - window.innerHeight / 5) {\r\n\t\t\t\tblock.classList.add('_scr-sector_active');\r\n\t\t\t} else {\r\n\t\t\t\tif (block.classList.contains('_scr-sector_active')) {\r\n\t\t\t\t\tblock.classList.remove('_scr-sector_active');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif ((pageYOffset > block_offset - window.innerHeight / 2) && pageYOffset < (block_offset + block_height) - window.innerHeight / 5) {\r\n\t\t\t\tif (!block.classList.contains('_scr-sector_current')) {\r\n\t\t\t\t\tblock.classList.add('_scr-sector_current');\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (block.classList.contains('_scr-sector_current')) {\r\n\t\t\t\t\tblock.classList.remove('_scr-sector_current');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif (scr_items.length > 0) {\r\n\t\tfor (let index = 0; index < scr_items.length; index++) {\r\n\t\t\tlet scr_item = scr_items[index];\r\n\t\t\tlet scr_item_offset = offset(scr_item).top;\r\n\t\t\tlet scr_item_height = scr_item.offsetHeight;\r\n\r\n\r\n\t\t\tlet scr_item_point = window.innerHeight - (window.innerHeight - scr_item_height / 3);\r\n\t\t\tif (window.innerHeight > scr_item_height) {\r\n\t\t\t\tscr_item_point = window.innerHeight - scr_item_height / 3;\r\n\t\t\t}\r\n\r\n\t\t\tif ((src_value > scr_item_offset - scr_item_point) && src_value < (scr_item_offset + scr_item_height)) {\r\n\t\t\t\tscr_item.classList.add('_active');\r\n\t\t\t\tscroll_load_item(scr_item);\r\n\t\t\t} else {\r\n\t\t\t\tscr_item.classList.remove('_active');\r\n\t\t\t}\r\n\t\t\tif (((src_value > scr_item_offset - window.innerHeight))) {\r\n\t\t\t\tif (scr_item.querySelectorAll('._lazy').length > 0) {\r\n\t\t\t\t\tscroll_lazy(scr_item);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif (scr_fix_block.length > 0) {\r\n\t\tfix_block(scr_fix_block, src_value);\r\n\t}\r\n\tlet custom_scroll_line = document.querySelector('._custom-scroll__line');\r\n\tif (custom_scroll_line) {\r\n\t\tlet window_height = window.innerHeight;\r\n\t\tlet content_height = document.querySelector('.wrapper').offsetHeight;\r\n\t\tlet scr_procent = (pageYOffset / (content_height - window_height)) * 100;\r\n\t\tlet custom_scroll_line_height = custom_scroll_line.offsetHeight;\r\n\t\tcustom_scroll_line.style.transform = \"translateY(\" + (window_height - custom_scroll_line_height) / 100 * scr_procent + \"px)\";\r\n\t}\r\n\tif (src_value > scrollDirection) {\r\n\t\t// downscroll code\r\n\t} else {\r\n\t\t// upscroll code\r\n\t}\r\n\tscrollDirection = src_value <= 0 ? 0 : src_value;\r\n}\r\nsetTimeout(function () {\r\n\t//document.addEventListener(\"DOMContentLoaded\", scroll_scroll);\r\n\tscroll_scroll();\r\n}, 100);\r\n\r\nfunction scroll_lazy(scr_item) {\r\n\tlet lazy_src = scr_item.querySelectorAll('*[data-src]');\r\n\tif (lazy_src.length > 0) {\r\n\t\tfor (let index = 0; index < lazy_src.length; index++) {\r\n\t\t\tconst el = lazy_src[index];\r\n\t\t\tif (!el.classList.contains('_loaded')) {\r\n\t\t\t\tel.setAttribute('src', el.getAttribute('data-src'));\r\n\t\t\t\tel.classList.add('_loaded');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tlet lazy_srcset = scr_item.querySelectorAll('*[data-srcset]');\r\n\tif (lazy_srcset.length > 0) {\r\n\t\tfor (let index = 0; index < lazy_srcset.length; index++) {\r\n\t\t\tconst el = lazy_srcset[index];\r\n\t\t\tif (!el.classList.contains('_loaded')) {\r\n\t\t\t\tel.setAttribute('srcset', el.getAttribute('data-srcset'));\r\n\t\t\t\tel.classList.add('_loaded');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\nfunction scroll_load_item(scr_item) {\r\n\tif (scr_item.classList.contains('_load-map') && !scr_item.classList.contains('_loaded-map')) {\r\n\t\tlet map_item = document.getElementById('map');\r\n\t\tif (map_item) {\r\n\t\t\tscr_item.classList.add('_loaded-map');\r\n\t\t\tmap();\r\n\t\t}\r\n\t}\r\n}\r\nfunction scrParallax(block, scrProcent, blockHeight) {\r\n\tlet prlxItems = block.querySelectorAll('._prlx-item');\r\n\tif (prlxItems.length > 0) {\r\n\t\tfor (let index = 0; index < prlxItems.length; index++) {\r\n\t\t\tconst prlxItem = prlxItems[index];\r\n\t\t\tlet prlxItemAttr = (prlxItem.dataset.prlx) ? prlxItem.dataset.prlx : 3;\r\n\t\t\tconst prlxItemValue = -1 * (blockHeight / 100 * scrProcent / prlxItemAttr);\r\n\t\t\tprlxItem.style.cssText = `transform: translateY(${prlxItemValue}px);`;\r\n\t\t}\r\n\t}\r\n}\r\n//FullScreenScroll\r\nif (scr_blocks.length > 0 && !isMobile.any()) {\r\n\tdisableScroll();\r\n\twindow.addEventListener('wheel', full_scroll);\r\n\r\n\tlet swiperScrolls = document.querySelectorAll('._swiper_scroll');\r\n\r\n\tif (swiperScrolls.length > 0) {\r\n\t\tfor (let index = 0; index < swiperScrolls.length; index++) {\r\n\t\t\tconst swiperScroll = swiperScrolls[index];\r\n\t\t\tswiperScroll.addEventListener(\"mouseenter\", function (e) {\r\n\t\t\t\twindow.removeEventListener('wheel', full_scroll);\r\n\t\t\t});\r\n\t\t\tswiperScroll.addEventListener(\"mouseleave\", function (e) {\r\n\t\t\t\twindow.addEventListener('wheel', full_scroll);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\nfunction getPrevBlockPos(current_block_prev) {\r\n\tlet viewport_height = window.innerHeight;\r\n\tlet current_block_prev_height = current_block_prev.offsetHeight;\r\n\tlet block_pos = offset(current_block_prev).top;\r\n\r\n\tif (current_block_prev_height >= viewport_height) {\r\n\t\tblock_pos = block_pos + (current_block_prev_height - viewport_height);\r\n\t}\r\n\treturn block_pos;\r\n}\r\nfunction full_scroll(e) {\r\n\tlet viewport_height = window.innerHeight;\r\n\tif (viewport_height >= scr_min_height) {\r\n\t\tif (scrolling_full) {\r\n\t\t\tlet current_block = document.querySelector('._scr-sector._scr-sector_current');\r\n\t\t\tlet current_block_pos = offset(current_block).top;\r\n\t\t\tlet current_block_height = current_block.offsetHeight;\r\n\t\t\tlet current_block_next = current_block.nextElementSibling;\r\n\t\t\tlet current_block_prev = current_block.previousElementSibling;\r\n\t\t\tif (e.keyCode == 40 || e.keyCode == 34 || e.deltaX > 0 || e.deltaY < 0) {\r\n\t\t\t\tif (current_block_height <= viewport_height) {\r\n\t\t\t\t\tif (current_block_prev) {\r\n\t\t\t\t\t\tfull_scroll_to_sector(getPrevBlockPos(current_block_prev));\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tenableScroll();\r\n\t\t\t\t\tif (currentScroll <= current_block_pos) {\r\n\t\t\t\t\t\tif (current_block_prev) {\r\n\t\t\t\t\t\t\tfull_scroll_to_sector(getPrevBlockPos(current_block_prev));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (e.keyCode == 38 || e.keyCode == 33 || e.deltaX < 0 || e.deltaY > 0) {\r\n\t\t\t\tif (current_block_height <= viewport_height) {\r\n\t\t\t\t\tif (current_block_next) {\r\n\t\t\t\t\t\tlet block_pos = offset(current_block_next).top;\r\n\t\t\t\t\t\tfull_scroll_to_sector(block_pos);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tenableScroll();\r\n\t\t\t\t\tif (current_block_next) {\r\n\t\t\t\t\t\tlet block_pos = offset(current_block_next).top;\r\n\t\t\t\t\t\tif (currentScroll >= block_pos - viewport_height) {\r\n\t\t\t\t\t\t\tfull_scroll_to_sector(block_pos);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tdisableScroll();\r\n\t\t}\r\n\t} else {\r\n\t\tenableScroll();\r\n\t}\r\n}\r\nfunction full_scroll_to_sector(pos) {\r\n\tdisableScroll();\r\n\tscrolling_full = false;\r\n\t_goto(pos, 800);\r\n\r\n\tlet scr_pause = 500;\r\n\tif (navigator.appVersion.indexOf(\"Mac\") != -1) {\r\n\t\tscr_pause = 1000;\r\n\t};\r\n\tsetTimeout(function () {\r\n\t\tscrolling_full = true;\r\n\t}, scr_pause);\r\n}\r\nfunction full_scroll_pagestart() { }\r\nfunction full_scroll_pageend() { }\r\n\r\n//ScrollOnClick (Navigation)\r\nlet link = document.querySelectorAll('._goto-block');\r\nif (link) {\r\n\tlet blocks = [];\r\n\tfor (let index = 0; index < link.length; index++) {\r\n\t\tlet el = link[index];\r\n\t\tlet block_name = el.getAttribute('href').replace('#', '');\r\n\t\tif (block_name != '' && !~blocks.indexOf(block_name)) {\r\n\t\t\tblocks.push(block_name);\r\n\t\t}\r\n\t\tel.addEventListener('click', function (e) {\r\n\t\t\tif (document.querySelector('.menu__body._active')) {\r\n\t\t\t\tmenu_close();\r\n\t\t\t\tbody_lock_remove(500);\r\n\t\t\t}\r\n\t\t\tlet target_block_class = el.getAttribute('href').replace('#', '');\r\n\t\t\tlet target_block = document.querySelector('.' + target_block_class);\r\n\t\t\t_goto(target_block, 300);\r\n\t\t\te.preventDefault();\r\n\t\t})\r\n\t}\r\n\r\n\twindow.addEventListener('scroll', function (el) {\r\n\t\tlet old_current_link = document.querySelectorAll('._goto-block._active');\r\n\t\tif (old_current_link) {\r\n\t\t\tfor (let index = 0; index < old_current_link.length; index++) {\r\n\t\t\t\tlet el = old_current_link[index];\r\n\t\t\t\tel.classList.remove('_active');\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (let index = 0; index < blocks.length; index++) {\r\n\t\t\tlet block = blocks[index];\r\n\t\t\tlet block_item = document.querySelector('.' + block);\r\n\t\t\tif (block_item) {\r\n\t\t\t\tlet block_offset = offset(block_item).top;\r\n\t\t\t\tlet block_height = block_item.offsetHeight;\r\n\t\t\t\tif ((pageYOffset > block_offset - window.innerHeight / 3) && pageYOffset < (block_offset + block_height) - window.innerHeight / 3) {\r\n\t\t\t\t\tlet current_links = document.querySelectorAll('._goto-block[href=\"#' + block + '\"]');\r\n\t\t\t\t\tfor (let index = 0; index < current_links.length; index++) {\r\n\t\t\t\t\t\tlet current_link = current_links[index];\r\n\t\t\t\t\t\tcurrent_link.classList.add('_active');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n}\r\n//ScrollOnClick (Simple)\r\nlet goto_links = document.querySelectorAll('._goto');\r\nlet body = document.querySelector(\"body\");\r\nif (goto_links) {\r\n\tfor (let index = 0; index < goto_links.length; index++) {\r\n\t\tlet goto_link = goto_links[index];\r\n\t\tgoto_link.addEventListener('click', function (e) {\r\n\t\t\tif (body.classList.contains('_lock')) {\r\n\t\t\t\tpopup_close(e.target.closest('.popup'));\r\n\t\t\t\tbody_lock_remove(delay);\r\n\t\t\t}\r\n\t\t\tlet target_block_class = goto_link.getAttribute('href').replace('#', '');\r\n\t\t\tlet target_block = document.querySelector('.' + target_block_class);\r\n\t\t\t_goto(target_block, 600);\r\n\t\t\te.preventDefault();\r\n\t\t});\r\n\t}\r\n}\r\nfunction _goto(target_block, speed, offset = 0) {\r\n\tlet header = '';\r\n\t//OffsetHeader\r\n\t//if (window.innerWidth < 992) {\r\n\t//\theader = 'header';\r\n\t//}\r\n\tlet options = {\r\n\t\tspeedAsDuration: true,\r\n\t\tspeed: speed,\r\n\t\theader: header,\r\n\t\toffset: offset,\r\n\t\teasing: 'easeOutQuad',\r\n\t};\r\n\tlet scr = new SmoothScroll();\r\n\tscr.animateScroll(target_block, '', options);\r\n}\r\n\r\n//SameFunctions\r\nfunction offset(el) {\r\n\tvar rect = el.getBoundingClientRect(),\r\n\t\tscrollLeft = window.pageXOffset || document.documentElement.scrollLeft,\r\n\t\tscrollTop = window.pageYOffset || document.documentElement.scrollTop;\r\n\treturn { top: rect.top + scrollTop, left: rect.left + scrollLeft }\r\n}\r\nfunction disableScroll() {\r\n\tif (window.addEventListener) // older FF\r\n\t\twindow.addEventListener('DOMMouseScroll', preventDefault, false);\r\n\tdocument.addEventListener('wheel', preventDefault, { passive: false }); // Disable scrolling in Chrome\r\n\twindow.onwheel = preventDefault; // modern standard\r\n\twindow.onmousewheel = document.onmousewheel = preventDefault; // older browsers, IE\r\n\twindow.ontouchmove = preventDefault; // mobile\r\n\tdocument.onkeydown = preventDefaultForScrollKeys;\r\n}\r\nfunction enableScroll() {\r\n\tif (window.removeEventListener)\r\n\t\twindow.removeEventListener('DOMMouseScroll', preventDefault, false);\r\n\tdocument.removeEventListener('wheel', preventDefault, { passive: false }); // Enable scrolling in Chrome\r\n\twindow.onmousewheel = document.onmousewheel = null;\r\n\twindow.onwheel = null;\r\n\twindow.ontouchmove = null;\r\n\tdocument.onkeydown = null;\r\n}\r\nfunction preventDefault(e) {\r\n\te = e || window.event;\r\n\tif (e.preventDefault)\r\n\t\te.preventDefault();\r\n\te.returnValue = false;\r\n}\r\nfunction preventDefaultForScrollKeys(e) {\r\n\t/*if (keys[e.keyCode]) {\r\n\t\tpreventDefault(e);\r\n\t\treturn false;\r\n\t}*/\r\n}\r\n\r\nfunction fix_block(scr_fix_block, scr_value) {\r\n\tlet window_width = parseInt(window.innerWidth);\r\n\tlet window_height = parseInt(window.innerHeight);\r\n\tlet header_height = parseInt(document.querySelector('header').offsetHeight) + 15;\r\n\tfor (let index = 0; index < scr_fix_block.length; index++) {\r\n\t\tconst block = scr_fix_block[index];\r\n\t\tlet block_width = block.getAttribute('data-width');\r\n\t\tconst item = block.querySelector('._side-block');\r\n\t\tif (!block_width) { block_width = 0; }\r\n\t\tif (window_width > block_width) {\r\n\t\t\tif (item.offsetHeight < window_height - (header_height + 30)) {\r\n\t\t\t\tif (scr_value > offset(block).top - (header_height + 15)) {\r\n\t\t\t\t\titem.style.cssText = \"position:fixed;bottom:auto;top:\" + header_height + \"px;width:\" + block.offsetWidth + \"px;left:\" + offset(block).left + \"px;\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgotoRelative(item);\r\n\t\t\t\t}\r\n\t\t\t\tif (scr_value > (block.offsetHeight + offset(block).top) - (item.offsetHeight + (header_height + 15))) {\r\n\t\t\t\t\tblock.style.cssText = \"position:relative;\";\r\n\t\t\t\t\titem.style.cssText = \"position:absolute;bottom:0;top:auto;left:0px;width:100%\";\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tgotoRelative(item);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tfunction gotoRelative(item) {\r\n\t\titem.style.cssText = \"position:relative;bottom:auto;top:0px;left:0px;\";\r\n\t}\r\n}\r\n\r\nif (!isMobile.any()) {\r\n\t//custom_scroll();\r\n\t/*\r\n\twindow.addEventListener('wheel', scroll_animate, {\r\n\t\tcapture: true,\r\n\t\tpassive: true\r\n\t});\r\n\twindow.addEventListener('resize', custom_scroll, {\r\n\t\tcapture: true,\r\n\t\tpassive: true\r\n\t});\r\n\t*/\r\n}\r\nfunction custom_scroll(event) {\r\n\tscr_body.style.overflow = 'hidden';\r\n\tlet window_height = window.innerHeight;\r\n\tlet custom_scroll_line = document.querySelector('._custom-scroll__line');\r\n\tlet custom_scroll_content_height = document.querySelector('.wrapper').offsetHeight;\r\n\tlet custom_cursor_height = Math.min(window_height, Math.round(window_height * (window_height / custom_scroll_content_height)));\r\n\tif (custom_scroll_content_height > window_height) {\r\n\t\tif (!custom_scroll_line) {\r\n\t\t\tlet custom_scroll = document.createElement('div');\r\n\t\t\tcustom_scroll_line = document.createElement('div');\r\n\t\t\tcustom_scroll.setAttribute('class', '_custom-scroll');\r\n\t\t\tcustom_scroll_line.setAttribute('class', '_custom-scroll__line');\r\n\t\t\tcustom_scroll.appendChild(custom_scroll_line);\r\n\t\t\tscr_body.appendChild(custom_scroll);\r\n\t\t}\r\n\t\tcustom_scroll_line.style.height = custom_cursor_height + 'px';\r\n\t}\r\n}\r\n\r\nlet new_pos = pageYOffset;\r\nfunction scroll_animate(event) {\r\n\tlet window_height = window.innerHeight;\r\n\tlet content_height = document.querySelector('.wrapper').offsetHeight;\r\n\tlet start_position = pageYOffset;\r\n\tlet pos_add = 100;\r\n\r\n\tif (event.keyCode == 40 || event.keyCode == 34 || event.deltaX > 0 || event.deltaY < 0) {\r\n\t\tnew_pos = new_pos - pos_add;\r\n\t} else if (event.keyCode == 38 || event.keyCode == 33 || event.deltaX < 0 || event.deltaY > 0) {\r\n\t\tnew_pos = new_pos + pos_add;\r\n\t}\r\n\tif (new_pos > (content_height - window_height)) new_pos = content_height - window_height;\r\n\tif (new_pos < 0) new_pos = 0;\r\n\r\n\tif (scrolling) {\r\n\t\tscrolling = false;\r\n\t\t_goto(new_pos, 1000);\r\n\r\n\t\tlet scr_pause = 100;\r\n\t\tif (navigator.appVersion.indexOf(\"Mac\") != -1) {\r\n\t\t\tscr_pause = scr_pause * 2;\r\n\t\t};\r\n\t\tsetTimeout(function () {\r\n\t\t\tscrolling = true;\r\n\t\t\t_goto(new_pos, 1000);\r\n\t\t}, scr_pause);\r\n\t}\r\n\t//If native scroll\r\n\t//disableScroll();\r\n}\r\n\r\n// Dynamic Adapt v.1\r\n// HTML data-da=\"where(uniq class name),when(breakpoint),position(digi)\"\r\n// e.x. data-da=\".item,992,2\"\r\n// Andrikanych Yevhen 2020\r\n// https://www.youtube.com/c/freelancerlifestyle\r\n\r\n\"use strict\";\r\n\r\n\r\nfunction DynamicAdapt(type) {\r\n\tthis.type = type;\r\n}\r\n\r\nDynamicAdapt.prototype.init = function () {\r\n\tconst _this = this;\r\n\t// массив объектов\r\n\tthis.оbjects = [];\r\n\tthis.daClassname = \"_dynamic_adapt_\";\r\n\t// массив DOM-элементов\r\n\tthis.nodes = document.querySelectorAll(\"[data-da]\");\r\n\r\n\t// наполнение оbjects объктами\r\n\tfor (let i = 0; i < this.nodes.length; i++) {\r\n\t\tconst node = this.nodes[i];\r\n\t\tconst data = node.dataset.da.trim();\r\n\t\tconst dataArray = data.split(\",\");\r\n\t\tconst оbject = {};\r\n\t\tоbject.element = node;\r\n\t\tоbject.parent = node.parentNode;\r\n\t\tоbject.destination = document.querySelector(dataArray[0].trim());\r\n\t\tоbject.breakpoint = dataArray[1] ? dataArray[1].trim() : \"767\";\r\n\t\tоbject.place = dataArray[2] ? dataArray[2].trim() : \"last\";\r\n\t\tоbject.index = this.indexInParent(оbject.parent, оbject.element);\r\n\t\tthis.оbjects.push(оbject);\r\n\t}\r\n\r\n\tthis.arraySort(this.оbjects);\r\n\r\n\t// массив уникальных медиа-запросов\r\n\tthis.mediaQueries = Array.prototype.map.call(this.оbjects, function (item) {\r\n\t\treturn '(' + this.type + \"-width: \" + item.breakpoint + \"px),\" + item.breakpoint;\r\n\t}, this);\r\n\tthis.mediaQueries = Array.prototype.filter.call(this.mediaQueries, function (item, index, self) {\r\n\t\treturn Array.prototype.indexOf.call(self, item) === index;\r\n\t});\r\n\r\n\t// навешивание слушателя на медиа-запрос\r\n\t// и вызов обработчика при первом запуске\r\n\tfor (let i = 0; i < this.mediaQueries.length; i++) {\r\n\t\tconst media = this.mediaQueries[i];\r\n\t\tconst mediaSplit = String.prototype.split.call(media, ',');\r\n\t\tconst matchMedia = window.matchMedia(mediaSplit[0]);\r\n\t\tconst mediaBreakpoint = mediaSplit[1];\r\n\r\n\t\t// массив объектов с подходящим брейкпоинтом\r\n\t\tconst оbjectsFilter = Array.prototype.filter.call(this.оbjects, function (item) {\r\n\t\t\treturn item.breakpoint === mediaBreakpoint;\r\n\t\t});\r\n\t\tmatchMedia.addListener(function () {\r\n\t\t\t_this.mediaHandler(matchMedia, оbjectsFilter);\r\n\t\t});\r\n\t\tthis.mediaHandler(matchMedia, оbjectsFilter);\r\n\t}\r\n};\r\n\r\nDynamicAdapt.prototype.mediaHandler = function (matchMedia, оbjects) {\r\n\tif (matchMedia.matches) {\r\n\t\tfor (let i = 0; i < оbjects.length; i++) {\r\n\t\t\tconst оbject = оbjects[i];\r\n\t\t\tоbject.index = this.indexInParent(оbject.parent, оbject.element);\r\n\t\t\tthis.moveTo(оbject.place, оbject.element, оbject.destination);\r\n\t\t}\r\n\t} else {\r\n\t\tfor (let i = 0; i < оbjects.length; i++) {\r\n\t\t\tconst оbject = оbjects[i];\r\n\t\t\tif (оbject.element.classList.contains(this.daClassname)) {\r\n\t\t\t\tthis.moveBack(оbject.parent, оbject.element, оbject.index);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\n// Функция перемещения\r\nDynamicAdapt.prototype.moveTo = function (place, element, destination) {\r\n\telement.classList.add(this.daClassname);\r\n\tif (place === 'last' || place >= destination.children.length) {\r\n\t\tdestination.insertAdjacentElement('beforeend', element);\r\n\t\treturn;\r\n\t}\r\n\tif (place === 'first') {\r\n\t\tdestination.insertAdjacentElement('afterbegin', element);\r\n\t\treturn;\r\n\t}\r\n\tdestination.children[place].insertAdjacentElement('beforebegin', element);\r\n}\r\n\r\n// Функция возврата\r\nDynamicAdapt.prototype.moveBack = function (parent, element, index) {\r\n\telement.classList.remove(this.daClassname);\r\n\tif (parent.children[index] !== undefined) {\r\n\t\tparent.children[index].insertAdjacentElement('beforebegin', element);\r\n\t} else {\r\n\t\tparent.insertAdjacentElement('beforeend', element);\r\n\t}\r\n}\r\n\r\n// Функция получения индекса внутри родителя\r\nDynamicAdapt.prototype.indexInParent = function (parent, element) {\r\n\tconst array = Array.prototype.slice.call(parent.children);\r\n\treturn Array.prototype.indexOf.call(array, element);\r\n};\r\n\r\n// Функция сортировки массива по breakpoint и place \r\n// по возрастанию для this.type = min\r\n// по убыванию для this.type = max\r\nDynamicAdapt.prototype.arraySort = function (arr) {\r\n\tif (this.type === \"min\") {\r\n\t\tArray.prototype.sort.call(arr, function (a, b) {\r\n\t\t\tif (a.breakpoint === b.breakpoint) {\r\n\t\t\t\tif (a.place === b.place) {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (a.place === \"first\" || b.place === \"last\") {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (a.place === \"last\" || b.place === \"first\") {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn a.place - b.place;\r\n\t\t\t}\r\n\r\n\t\t\treturn a.breakpoint - b.breakpoint;\r\n\t\t});\r\n\t} else {\r\n\t\tArray.prototype.sort.call(arr, function (a, b) {\r\n\t\t\tif (a.breakpoint === b.breakpoint) {\r\n\t\t\t\tif (a.place === b.place) {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (a.place === \"first\" || b.place === \"last\") {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (a.place === \"last\" || b.place === \"first\") {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn b.place - a.place;\r\n\t\t\t}\r\n\r\n\t\t\treturn b.breakpoint - a.breakpoint;\r\n\t\t});\r\n\t\treturn;\r\n\t}\r\n};\r\n\r\nconst da = new DynamicAdapt(\"max\");\r\nda.init();"]}